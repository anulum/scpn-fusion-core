<!--
SCPN Fusion Core — Phase 3 Execution Registry
© 1998–2026 Miroslav Šotek. All rights reserved.
Contact: www.anulum.li | protoscience@anulum.li
ORCID: https://orcid.org/0009-0009-3560-0851
License: GNU AGPL v3 | Commercial licensing available
-->

# Phase 3 Execution Registry and Sprint S2 Queue

Date: 2026-02-13

This registry tracks the high-impact enhancement backlog imported after Phase 2 closure.

## Registry Size

| Source Pack | Imported Tasks |
|---|---|
| Control and simulation enhancement plan | 20 |
| HPC solver enhancement plan | 21 |
| Nuclear simulation enhancement plan | 19 |
| SCPN compiler enhancement plan | 25 |
| Total imported Phase 3 backlog | 85 |

Current tracker baseline (`docs/PHASE2_ADVANCED_RFC_TRACKER.md`): 20/20 tasks complete (`Done`).

## Prioritization Guardrails

- Keep strict green gates before each merge:
  - `cargo clippy --all-targets --all-features -- -D warnings`
  - `cargo test --all-features`
  - `python -m pytest -v`
- Maximum active work-in-progress: 2 tasks.
- Prefer changes that improve determinism, testability, and runtime safety before model scope expansion.
- External-data-dependent work stays blocked until data/license readiness is explicit in RFC.

## Sprint S2 Execution Queue (Ordered)

| ID | Priority | Track | Task | Target Files | Definition of Done | Validation |
|---|---|---|---|---|---|---|
| S2-001 | P0 | HPC | Add in-place zero-allocation bridge solve paths (`solve_into`, converged variant) | `src/scpn_fusion/hpc/hpc_bridge.py`, `tests/test_hpc_bridge.py` | Reusable output buffer paths exist with strict shape/layout checks and tests | `python -m pytest tests/test_hpc_bridge.py -v` |
| S2-002 | P0 | HPC | Harden C++ SOR convergence API with explicit bad-input guards | `src/scpn_fusion/hpc/solver.cpp`, `tests/test_hpc_bridge.py` | Null/size/iteration guards verified by tests and no clippy/format regressions | `python -m pytest tests/test_hpc_bridge.py -v` |
| S2-003 | P0 | SCPN | Add stochastic-vs-float equivalence benchmark gate (`<=5%` error) | `src/scpn_fusion/scpn/controller.py`, `validation/gneu_01_benchmark.py`, `tests/` | Deterministic campaign metric exposed and thresholded in tests | `python -m pytest tests/test_gneu_01_benchmark.py -v` |
| S2-004 | P1 | Control | Add robust model-loading fallback path in disruption predictor | `src/scpn_fusion/control/disruption_predictor.py`, `tests/` | Missing-model path no longer crashes and emits deterministic fallback score | `python -m pytest tests/test_gneu_02_anomaly.py -v` |
| S2-005 | P1 | Nuclear | Increase PWI coverage for angle-energy invariants + redeposition bounds | `src/scpn_fusion/nuclear/pwi_erosion.py`, `tests/test_pwi_erosion.py` | Invariants captured in tests with deterministic tolerances | `python -m pytest tests/test_pwi_erosion.py -v` |
| S2-006 | P1 | Nuclear | Extend TEMHD solver regression with pathological edge cases | `src/scpn_fusion/nuclear/temhd_peltier.py`, `tests/test_temhd_peltier.py` | Singular/near-singular stability behavior documented and tested | `python -m pytest tests/test_temhd_peltier.py -v` |
| S2-007 | P2 | Docs | Normalize path mappings for all imported tasks to repository modules | `docs/3d_gaps.md`, `docs/PHASE3_EXECUTION_REGISTRY.md` | Every queued task maps to real paths only | Docs review |
| S2-008 | P2 | Release | Add queue-level release gate summary for S2 | `validation/gdep_05_release_readiness.py`, `tests/test_gdep_05_release_readiness.py` | Report includes S2 queue health section without breaking current checks | `python -m pytest tests/test_gdep_05_release_readiness.py -v` |

## Sprint S3 Execution Queue (Ordered)

| ID | Priority | Track | Task | Target Files | Definition of Done | Validation |
|---|---|---|---|---|---|---|
| S3-001 | P0 | SCPN | Add topology diagnostics for dead nodes and unseeded place cycles | `src/scpn_fusion/scpn/structure.py`, `tests/test_scpn_compiler.py` | `validate_topology()` + optional strict compile validation implemented and tested | `python -m pytest tests/test_scpn_compiler.py tests/test_hypothesis_properties.py -v` |
| S3-002 | P0 | SCPN | Add inhibitor-arc support with explicit opt-in semantics | `src/scpn_fusion/scpn/structure.py`, `tests/test_scpn_compiler.py` | Inhibitor arc definition supported without breaking default positive-weight semantics | `python -m pytest tests/test_scpn_compiler.py -v` |
| S3-003 | P1 | SCPN | Add compact artifact serialization mode for packed bitstreams | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Optional compact export/import path round-trips deterministically | `python -m pytest tests/test_controller.py -v` |
| S3-004 | P1 | Control | Normalize control simulation imports and deterministic fallback entry points | `src/scpn_fusion/control/disruption_predictor.py`, `src/scpn_fusion/control/tokamak_digital_twin.py`, `tests/test_gneu_02_anomaly.py` | No hard crash on missing model/dependency paths in core control entry points | `python -m pytest tests/test_gneu_02_anomaly.py -v` |
| S3-005 | P1 | HPC | Extend bridge/solver validation for invalid stride/shape edge paths | `src/scpn_fusion/hpc/hpc_bridge.py`, `src/scpn_fusion/hpc/solver.cpp`, `tests/test_hpc_bridge.py` | Additional boundary/fuzz-style guards and tests for invalid buffer geometry | `python -m pytest tests/test_hpc_bridge.py -v` |
| S3-006 | P2 | Release | Add S3 queue health visibility in release-readiness markdown | `validation/gdep_05_release_readiness.py`, `tests/test_gdep_05_release_readiness.py` | Release report captures S3 progress without weakening existing hard gates | `python -m pytest tests/test_gdep_05_release_readiness.py -v` |

## Sprint S4 Execution Queue (Ordered)

| ID | Priority | Track | Task | Target Files | Definition of Done | Validation |
|---|---|---|---|---|---|---|
| S4-001 | P0 | SCPN | Wire topology/inhibitor compile controls through `FusionCompiler` | `src/scpn_fusion/scpn/compiler.py`, `tests/test_scpn_compiler.py` | Compiler can enforce topology checks and inhibitor opt-in at compile entry point | `python -m pytest tests/test_scpn_compiler.py tests/test_hypothesis_properties.py -v` |
| S4-002 | P1 | SCPN | Add deterministic compact-packed artifact codec smoke checks independent of runtime packed availability | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Compact codec validated directly for deterministic roundtrip of u64 payloads | `python -m pytest tests/test_controller.py -v` |
| S4-003 | P1 | Control | Add deterministic safe runtime summary path for `tokamak_flight_sim` | `src/scpn_fusion/control/tokamak_flight_sim.py`, `tests/` | Control script callable in CI without interactive plotting dependency | `python -m pytest -v` |
| S4-004 | P2 | Release | Extend release-readiness queue health to include S4 lane | `validation/gdep_05_release_readiness.py`, `tests/test_gdep_05_release_readiness.py` | Release report includes S2/S3/S4 queue snapshots | `python -m pytest tests/test_gdep_05_release_readiness.py -v` |

## Post-S4 Hardening Queue (Ad Hoc)

| ID | Priority | Track | Task | Target Files | Definition of Done | Validation |
|---|---|---|---|---|---|---|
| H5-001 | P1 | SCPN | Generalize controller feature passthrough sources from artifact injections | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | Non-default injection sources are consumed without hardcoded feature keys; missing passthrough keys fail deterministically | `python -m pytest tests/test_controller.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py` |
| H5-002 | P1 | SCPN | Add strict topology guard for positive input-weight overflow | `src/scpn_fusion/scpn/structure.py`, `tests/test_scpn_compiler.py` | Topology diagnostics surface transitions with positive input sum >1.0 and strict compile rejects them | `python -m pytest tests/test_scpn_compiler.py tests/test_hypothesis_properties.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/structure.py` |
| H5-003 | P1 | SCPN | Add optional oracle-path bypass for runtime controller loops + generic observation mapping | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | Controller accepts arbitrary observation mappings for feature passthrough and can skip oracle diagnostics path when disabled | `python -m pytest tests/test_controller.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py` |
| H5-004 | P1 | SCPN | Wire explicit custom feature-axis mapping into controller runtime | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | Controller can map non-`R_axis_m`/`Z_axis_m` observations into existing feature places via `feature_axes` and fails deterministically on missing keys | `python -m pytest tests/test_controller.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py` |
| H5-005 | P0 | SCPN | Promote adaptive SCPN runtime defaults and add optional Rust dense-runtime kernels | `src/scpn_fusion/scpn/controller.py`, `scpn-fusion-rs/crates/fusion-python/src/lib.rs`, `tests/test_controller.py` | Controller default profile is adaptive (binary probabilistic margin), supports runtime backend selection (`auto`/`numpy`/`rust`), and uses Rust dense kernels when available for large nets | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `cargo test -p scpn-fusion-rs`, `cargo clippy -p scpn-fusion-rs --all-targets --all-features -- -D warnings` |
| H5-006 | P1 | SCPN | Reduce Python overhead in SCPN tick loop via vectorized injection/action decode and array-native stepping | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py`, `tests/test_scpn_pid_mpc_benchmark.py` | Controller step avoids redundant list↔array conversions, uses vectorized place injection + action decode, and keeps benchmark thresholds unchanged | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py` |
| H5-007 | P1 | SCPN | Keep controller state in internal NumPy marking array with compatibility accessors | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | Internal runtime state remains array-native across ticks while external `marking` API remains compatible, preserving benchmark thresholds | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py` |
| H5-008 | P1 | SCPN | Add compiled feature-evaluation path for injection sources to remove per-tick dict churn | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | Controller computes feature components once per tick from compiled axis metadata and injects directly into marking with deterministic error semantics and unchanged benchmark thresholds | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py` |
| H5-009 | P1 | SCPN | Add preallocated dense/update work buffers and explicit Rust-kernel execution regression | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | Numpy backend reuses work buffers in dense/update path and tests verify Rust backend path executes when available (mocked), preserving deterministic behavior and benchmark thresholds | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py` |
| H5-010 | P1 | SCPN | Remove per-tick observation-map churn and keep marking updates buffer-backed without aliasing | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | Controller feature extraction uses incoming observation mapping directly, marking update writes into dedicated work buffers, and `marking` accessors preserve non-aliasing API behavior | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `python validation/scpn_pid_mpc_benchmark.py --seed 42 --steps 240 --strict` |
| H5-011 | P1 | SCPN | Convert feature/injection/input-marking hot path to fully reusable in-place scratch buffers | `src/scpn_fusion/scpn/controller.py` | Step path avoids per-tick allocation for observation vectors, feature components, injection values, and input-marking prep while preserving deterministic outputs and benchmark gates | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `python validation/scpn_pid_mpc_benchmark.py --seed 42 --steps 240 --strict` |
| H5-012 | P1 | SCPN | Replace high-allocation stochastic sampling path with binomial and low-allocation antithetic counting | `src/scpn_fusion/scpn/controller.py` | SC firing estimation avoids mirrored draw tensors, uses binomial counts for plain sampling, preserves deterministic replay, and keeps benchmark thresholds unchanged | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `python validation/scpn_pid_mpc_benchmark.py --seed 42 --steps 240 --strict` |
| H5-013 | P1 | SCPN | Add Rust stochastic-firing kernel bridge for runtime backend and validate Rust sample path execution | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py`, `scpn-fusion-rs/crates/fusion-python/src/lib.rs`, `scpn-fusion-rs/crates/fusion-python/Cargo.toml` | Rust backend can offload SC firing-sampling counts (when bit-flip faults are disabled), Python keeps deterministic fallback, and tests prove Rust sample hook execution | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `cargo test -p scpn-fusion-rs`, `cargo clippy -p scpn-fusion-rs --all-targets --all-features -- -D warnings`, `python validation/scpn_pid_mpc_benchmark.py --seed 42 --steps 240 --strict` |
| H5-014 | P1 | SCPN | Add regression lock that default runtime profile remains adaptive (non-oracle binary) | `tests/test_controller.py` | Default controller construction (without runtime_profile override) provably diverges from strict oracle binary threshold path under identical seed/obs inputs | `python -m pytest tests/test_controller.py -v` |
| H5-015 | P1 | SCPN | Expand Rust stochastic-sampling offload coverage to bit-flip campaigns via dedicated fault RNG stream | `src/scpn_fusion/scpn/controller.py` | Rust backend sampling remains active even when bit-flip injection is enabled; faults use separate deterministic `sc_flip` RNG stream and benchmark gates remain unchanged | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `python validation/scpn_pid_mpc_benchmark.py --seed 42 --steps 240 --strict` |
| H5-016 | P0 | HPC | Restrict native solver library loading to trusted package paths + explicit env override | `src/scpn_fusion/hpc/hpc_bridge.py`, `tests/test_hpc_bridge.py` | HPC bridge no longer searches CWD for native libraries, supports `SCPN_SOLVER_LIB` opt-in override, and defaults to package-local paths only | `python -m pytest tests/test_hpc_bridge.py -v` |
| H5-017 | P0 | SCPN | Add bounded compact-payload decompression with strict base64 and size caps | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Compact artifact decode validates payload type, compressed size, decompressed size, and count bounds to prevent zip-bomb / memory abuse paths | `python -m pytest tests/test_controller.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/artifact.py` |
| H5-018 | P1 | CI | Pin optional `sc-neurocore` bootstrap dependency to immutable commit | `.github/workflows/ci.yml` | CI optional pip install references `sc-neurocore` with explicit commit SHA in both Python 3.12 bootstrap lanes for reproducibility | CI workflow run |
| H5-019 | P1 | Runtime | Remove hardcoded path + `sys.path` hack from realtime simulation entrypoint | `run_realtime_simulation.py` | Realtime script resolves config relative to script root and supports explicit `--config`, without mutating `sys.path` at runtime | `python run_realtime_simulation.py --help` |
| H5-020 | P1 | Container | Harden runtime image with prod-by-default dependency install and non-root user | `Dockerfile` | Runtime image installs `.` by default (`INSTALL_DEV=1` opt-in for dev extras) and runs as unprivileged `appuser` | Docker build smoke |
| H5-021 | P0 | Core | Add solver fail-fast mode for divergence and enable for validation configs | `src/scpn_fusion/core/fusion_kernel.py`, `validation/*.json`, `tests/test_fusion_kernel_fail_on_diverge.py` | Equilibrium solver raises on NaN/Inf when `solver.fail_on_diverge=true`; validation configs enable flag; tests cover both guarded and permissive behavior | `python -m pytest tests/test_fusion_kernel_fail_on_diverge.py -v` |
| H5-022 | P0 | SCPN | Harden py312 strict typing for stochastic binomial counts path | `src/scpn_fusion/scpn/controller.py` | Controller binomial branch is strictly array-typed under mypy py312 lane, eliminating scalar-or-array assignment ambiguity in CI | `python -m mypy --strict src/scpn_fusion/scpn/contracts.py src/scpn_fusion/scpn/controller.py src/scpn_fusion/scpn/structure.py src/scpn_fusion/scpn/artifact.py src/scpn_fusion/scpn/compiler.py src/scpn_fusion/scpn/__init__.py` |
| H5-023 | P1 | SCPN | Precompute transition-delay indices to remove per-tick timing mask/index churn | `src/scpn_fusion/scpn/controller.py` | Controller caches immediate/delayed transition index vectors and reuses delay-slot buffers in `_apply_transition_timing`, preserving deterministic outputs and benchmark thresholds | `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -v`, `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `python validation/scpn_pid_mpc_benchmark.py --seed 42 --steps 240 --strict` |
| H5-024 | P1 | Control | Stabilize GAI-02 latency metric with deterministic hardware-normalized proxy | `src/scpn_fusion/control/torax_hybrid_loop.py` | TORAX-hybrid campaign reports deterministic loop-latency proxy independent of host jitter while preserving parity/avoidance thresholds and strict validation pass | `python -m pytest tests/test_gai_02_torax_hybrid.py -v`, `python validation/gai_02_torax_hybrid.py --strict`, `python -m pytest tests/ -q -x` |
| H5-025 | P2 | Tests | Remove path-hack/cwd coupling from legacy physics smoke tests | `tests/test_physics.py` | Physics tests run via package imports and `tmp_path` fixture config files, with no `sys.path` mutation or cwd file writes | `python -m pytest tests/test_physics.py -v` |
| H5-026 | P2 | Validation | Remove path-hack and hardcoded root path from ITER validation runner | `validation/validate_iter.py` | ITER validation script resolves config relative to repository root, exposes `--config`, and runs without `sys.path` mutation | `python validation/validate_iter.py --help` |
| H5-027 | P2 | Tests | Remove path-hack/cwd dependency from legacy unittest aggregation harness | `tests/run_all_tests.py` | `run_all_tests.py` relies on package imports only and writes temp config into an isolated temporary directory (no cwd mutation) | `python tests/run_all_tests.py` |
| H5-028 | P2 | Diagnostics | Remove path-hack/hardcoded root dependency from diagnostics demo runner | `src/scpn_fusion/diagnostics/run_diagnostics.py` | Diagnostics demo resolves config/output paths via `Path` defaults and exposes CLI flags without `sys.path` mutation | `python src/scpn_fusion/diagnostics/run_diagnostics.py --help` |
| H5-029 | P2 | Validation | Remove path injection from SPARC validation CLI and rely on package import path | `validation/validate_against_sparc.py` | SPARC validation script runs without mutating `sys.path`, preserving existing metrics/report behavior | `python validation/validate_against_sparc.py` |
| H5-030 | P2 | Validation | Remove path injection from G* validation runners and rely on package import path | `validation/control_resilience_campaign.py`, `validation/gai_01_turbulence_surrogate.py`, `validation/gai_02_torax_hybrid.py`, `validation/gai_03_heat_ml_shadow.py`, `validation/gdep_01_digital_twin_hook.py`, `validation/gdep_02_gpu_integration.py`, `validation/gmvr_03_stellarator_extension.py` | G-series validation runners execute without mutating `sys.path`, preserving existing CLI/report behavior via package import resolution | `python -m pytest tests/test_gai_01_turbulence_surrogate.py tests/test_gai_02_torax_hybrid.py tests/test_gai_03_heat_ml_shadow.py tests/test_gdep_01_digital_twin_hook.py tests/test_gdep_02_gpu_integration.py tests/test_gmvr_03_stellarator_extension.py -q` |
| H5-031 | P2 | Validation | Remove path injection from remaining GMVR/GNEU/RMSE benchmark runners and rely on package import path | `validation/gmvr_01_compact_constraints.py`, `validation/gmvr_02_temhd_divertor.py`, `validation/gneu_01_benchmark.py`, `validation/gneu_03_fueling_mode.py`, `validation/rmse_dashboard.py`, `validation/scpn_pid_mpc_benchmark.py` | Remaining validation runners execute without mutating `sys.path`, preserving strict campaign/report outputs under package import resolution | `python -m pytest tests/test_gmvr_01_compact_constraints.py tests/test_gmvr_02_temhd_divertor.py tests/test_gneu_01_benchmark.py tests/test_gneu_03_fueling_mode.py tests/test_rmse_dashboard.py tests/test_scpn_pid_mpc_benchmark.py -q`, `python validation/gneu_01_benchmark.py --strict`, `python validation/gneu_03_fueling_mode.py --strict`, `python validation/rmse_dashboard.py`, `python validation/scpn_pid_mpc_benchmark.py --strict` |
| H5-032 | P2 | Runtime | Remove package path injection from legacy core modules and targeted tests while preserving external bridge override | `src/scpn_fusion/core/force_balance.py`, `src/scpn_fusion/core/global_design_scanner.py`, `src/scpn_fusion/core/integrated_transport_solver.py`, `src/scpn_fusion/core/lazarus_bridge.py`, `src/scpn_fusion/core/neural_equilibrium.py`, `src/scpn_fusion/core/rf_heating.py`, `src/scpn_fusion/core/stability_analyzer.py`, `src/scpn_fusion/core/vibrana_bridge.py`, `src/scpn_fusion/core/wdm_engine.py`, `tests/test_fno_training.py`, `tests/test_hypothesis_properties.py` | Core/test modules no longer mutate `sys.path` for package imports; only `vibrana_bridge.py` keeps explicit external `CCW_Standalone` bridge path | `python -m pytest tests/test_fno_training.py tests/test_hypothesis_properties.py tests/test_gai_03_heat_ml_shadow.py tests/test_gmvr_01_compact_constraints.py -q`, `python -c \"import scpn_fusion.core.force_balance, scpn_fusion.core.global_design_scanner, scpn_fusion.core.integrated_transport_solver, scpn_fusion.core.lazarus_bridge, scpn_fusion.core.neural_equilibrium, scpn_fusion.core.rf_heating, scpn_fusion.core.stability_analyzer, scpn_fusion.core.vibrana_bridge, scpn_fusion.core.wdm_engine\"` |
| H5-033 | P1 | SCPN | Expand default Rust offload eligibility and add chunked antithetic sampling for large-net runtime stability | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | Auto backend now prefers Rust whenever available (override still supported), antithetic sampling uses chunked vector passes for large transition counts, and deterministic replay/benchmark thresholds remain stable | `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `python -m pytest tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py tests/test_gneu_01_benchmark.py -q`, `python validation/scpn_pid_mpc_benchmark.py --strict` |
| H5-034 | P1 | Validation | Shift PID/MPC SCPN campaign baseline from strict-binary thresholding to adaptive stochastic margin | `validation/scpn_pid_mpc_benchmark.py` | Benchmark controller now uses non-zero binary margin (`0.05`) so default lane reflects adaptive stochastic SCPN behavior while preserving deterministic replay and strict thresholds | `python -m pytest tests/test_scpn_pid_mpc_benchmark.py tests/test_controller.py tests/test_gneu_01_benchmark.py -q`, `python validation/scpn_pid_mpc_benchmark.py --strict` |
| H5-035 | P1 | Validation | Add regression lock ensuring PID/MPC SCPN lane keeps non-zero adaptive binary margin | `tests/test_scpn_pid_mpc_benchmark.py` | Benchmark test suite asserts `_build_scpn_controller()` configures SCPN with non-zero `sc_binary_margin`, preventing silent reversion to strict-binary thresholding | `python -m pytest tests/test_scpn_pid_mpc_benchmark.py tests/test_controller.py tests/test_gneu_01_benchmark.py -q`, `python validation/scpn_pid_mpc_benchmark.py --strict` |
| H5-036 | P1 | Validation | Pin GNEU-01 benchmark controller to adaptive non-zero binary margin and add regression lock | `validation/gneu_01_benchmark.py`, `tests/test_gneu_01_benchmark.py` | GNEU-01 controller construction explicitly sets `sc_binary_margin=0.05` and tests assert the benchmark lane preserves non-zero adaptive stochastic margin | `python -m pytest tests/test_gneu_01_benchmark.py tests/test_controller.py tests/test_scpn_pid_mpc_benchmark.py -q`, `python validation/gneu_01_benchmark.py --strict` |
| H5-037 | P1 | Validation | Pin GNEU-03 fueling controller to adaptive non-zero binary margin and add regression lock | `src/scpn_fusion/control/fueling_mode.py`, `tests/test_gneu_03_fueling_mode.py` | Fueling controller construction explicitly sets `sc_binary_margin=0.05` and tests assert the controller lane preserves non-zero adaptive stochastic margin | `python -m pytest tests/test_gneu_03_fueling_mode.py tests/test_gneu_01_benchmark.py tests/test_scpn_pid_mpc_benchmark.py -q`, `python validation/gneu_03_fueling_mode.py --strict` |

## Reactor Engineering Elevation Queue (External Intake 2026-02-14)

These items map the external "research framework -> reactor engineering suite" gaps
into executable backlog tasks. Existing reduced implementations (VMEC-like geometry,
particle overlay, digital-twin noise/lag, and HPC migration docs) are treated as
starting points and upgraded to engineering-grade lanes below.

| ID | Priority | Track | Task | Target Files | Definition of Done | Validation |
|---|---|---|---|---|---|---|
| H6-001 | P0 | Physics | Add 3D equilibrium interoperability lane via VMEC interface wrapper (no full solver rewrite) | `scpn-fusion-rs/crates/fusion-core/src/vmec_interface.rs`, `scpn-fusion-rs/crates/fusion-core/src/lib.rs`, `src/scpn_fusion/core/equilibrium_3d.py`, `tests/test_equilibrium_3d.py` | VMEC-compatible IO bridge loads/export reduced Fourier boundary/state and round-trips deterministic equilibrium fields for non-axisymmetric validation cases | `cargo test -p fusion-core vmec_interface`, `python -m pytest tests/test_equilibrium_3d.py -v` |
| H6-002 | P0 | Physics | Extend hybrid kinetic-fluid lane for high-energy alpha / runaway test particles on top of MHD background | `scpn-fusion-rs/crates/fusion-core/src/particles.rs`, `scpn-fusion-rs/crates/fusion-core/src/kernel.rs`, `tests/test_physics.py` | Reduced test-particle tracker reports orbit/energy statistics and current-feedback coupling under high-energy scenarios without destabilizing base GS solve | `cargo test -p fusion-core particles`, `python -m pytest tests/test_physics.py -v` |
| H6-003 | P0 | Diagnostics | Add synthetic forward diagnostics producing raw-observable channels (interferometer phase, neutron count) | `src/scpn_fusion/diagnostics/forward.py`, `src/scpn_fusion/diagnostics/synthetic_sensors.py`, `tests/test_diagnostics.py`, `validation/rmse_dashboard.py` | Forward models generate deterministic raw sensor outputs from plasma state and can be directly scored against reference channel traces | `python -m pytest tests/test_diagnostics.py tests/test_rmse_dashboard.py -v`, `python validation/rmse_dashboard.py` |
| H6-004 | P1 | Interop | Add IMAS/IDS adapter pattern for Digital Twin state interchange | `src/scpn_fusion/io/imas_connector.py`, `src/scpn_fusion/control/tokamak_digital_twin.py`, `tests/test_tokamak_digital_twin.py` | Digital Twin state maps to/from IDS-shaped payloads with schema checks, deterministic field mapping, and graceful missing-field handling | `python -m pytest tests/test_tokamak_digital_twin.py -v` |
| H6-005 | P1 | Engineering | Add CAD geometry integration lane for STEP/STL-derived heat/neutron load tracing | `src/scpn_fusion/engineering/cad_raytrace.py`, `src/scpn_fusion/nuclear/nuclear_wall_interaction.py`, `tests/test_blanket_neutronics.py` | CAD mesh ingestion (STEP/STL->mesh) computes deterministic line-of-sight loading estimates and merges with existing wall/blanket post-processing | `python -m pytest tests/test_blanket_neutronics.py -v` |
| H6-006 | P1 | Control | Add explicit actuator transfer-function dynamics to flight simulation/control execution path | `src/scpn_fusion/control/tokamak_flight_sim.py`, `src/scpn_fusion/scpn/contracts.py`, `tests/test_tokamak_flight_sim.py` | Coil/heating commands pass through first-order lag/latency transfer models with bounded outputs and deterministic replay under fixed seeds | `python -m pytest tests/test_tokamak_flight_sim.py -v` |
| H6-007 | P1 | Operations | Add domain-randomization "chaos monkey" faults for sensor dropout and Gaussian perturbations in twin training lane | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs`, `validation/gdep_01_digital_twin_hook.py`, `tests/test_gdep_01_digital_twin_hook.py` | Training/evaluation campaigns support deterministic configurable channel-drop/noise injections with thresholded resilience metrics | `cargo test -p fusion-control digital_twin`, `python -m pytest tests/test_gdep_01_digital_twin_hook.py -v` |
| H6-008 | P2 | Performance | Add multi-node MPI domain-decomposition scaffolding for core grid solves | `scpn-fusion-rs/crates/fusion-core/Cargo.toml`, `scpn-fusion-rs/crates/fusion-core/src/mpi_domain.rs`, `src/scpn_fusion/hpc/HPC_MIGRATION_PLAN.md` | Optional MPI build path partitions grid/domain metadata and synchronizes halo boundaries with deterministic serial-equivalence smoke checks | `cargo test -p fusion-core mpi_domain`, `cargo clippy -p fusion-core --all-targets --all-features -- -D warnings` |
| H6-009 | P2 | Performance | Add traceable control-loop runtime lane to reduce Python interpreter overhead in tight loops | `src/scpn_fusion/scpn/controller.py`, `src/scpn_fusion/scpn/compiler.py`, `validation/scpn_pid_mpc_benchmark.py`, `tests/test_scpn_pid_mpc_benchmark.py` | Traceable execution mode (JAX/TorchScript-ready graph boundary) preserves deterministic controller outputs while reducing per-step overhead in benchmark lane | `python -m pytest tests/test_scpn_pid_mpc_benchmark.py tests/test_controller.py -v`, `python validation/scpn_pid_mpc_benchmark.py --strict` |

## Deferred Pool Activation Queue (Wave H7, 2026-02-14)

These items are executed directly from the source enhancement plans used to
derive the imported 85-task Phase 3 backlog.

| ID | Priority | Track | Task | Target Files | Definition of Done | Validation |
|---|---|---|---|---|---|---|
| H7-001 | P1 | Control | Add reduced `Z_eff` impurity-dilution and calibrated CQ time-constant lane in SPI mitigation model | `src/scpn_fusion/control/spi_mitigation.py`, `tests/test_spi_mitigation.py` | SPI path exposes deterministic `Z_eff` + `tau_CQ` diagnostics, preserves existing demo behavior, and validates monotonic impurity/quench trends | `python -m pytest tests/test_spi_mitigation.py -v` |
| H7-002 | P1 | Control | Add optional gyrokinetic-surrogate diffusivity hook in digital twin runtime | `src/scpn_fusion/control/tokamak_digital_twin.py`, `tests/test_tokamak_digital_twin.py` | Digital twin accepts deterministic surrogate correction map with strict shape guards and preserves default deterministic behavior when unset | `python -m pytest tests/test_tokamak_digital_twin.py tests/test_gdep_01_digital_twin_hook.py -v` |
| H7-003 | P1 | Control | Harden fusion-control-room runtime with deterministic non-interactive execution lane and optional kernel-backed Psi ingestion | `src/scpn_fusion/control/fusion_control_room.py`, `tests/test_fusion_control_room.py` | Control-room loop returns deterministic summary metrics in CI-safe mode, supports optional kernel-provided Psi fields, and keeps GIF/report export optional | `python -m pytest tests/test_fusion_control_room.py -v` |
| H7-004 | P1 | Nuclear | Add rear-albedo reflection boundary control to blanket transport lane and validate monotonic TBR behavior | `src/scpn_fusion/nuclear/blanket_neutronics.py`, `tests/test_blanket_neutronics.py` | 1D transport accepts bounded rear albedo parameter, rejects invalid values, and tests lock expected TBR reflection trend | `python -m pytest tests/test_blanket_neutronics.py -v` |
| H7-005 | P1 | Control | Add deterministic NumPy LIF fallback backend for neuro-cybernetic spiking pool when sc-neurocore is unavailable | `src/scpn_fusion/control/neuro_cybernetic_controller.py`, `tests/test_neuro_cybernetic_controller.py` | Spiking pool preserves push-pull control semantics with deterministic fallback dynamics and backend visibility without optional dependency hard-fail | `python -m pytest tests/test_neuro_cybernetic_controller.py -v` |
| H7-006 | P1 | Control | Harden Director interface with deterministic built-in fallback oversight and CI-safe summary execution | `src/scpn_fusion/control/director_interface.py`, `tests/test_director_interface.py` | Director runtime no longer hard-fails when optional `DIRECTOR_AI` module is absent, fallback rule-based review remains deterministic, and mission runner supports non-plot summary mode | `python -m pytest tests/test_director_interface.py -v` |
| H7-007 | P1 | Nuclear | Remove hardcoded config path from nuclear-wall runner and add explicit ash pumping-efficiency control | `src/scpn_fusion/nuclear/nuclear_wall_interaction.py`, `tests/test_nuclear_wall_interaction.py` | Nuclear wall runner resolves default repo-local config or explicit override, returns deterministic CI-safe summary in non-plot mode, and ash poisoning validates bounded pumping efficiency with expected monotonic behavior | `python -m pytest tests/test_nuclear_wall_interaction.py -v` |
| H7-008 | P1 | Nuclear | Restore NumPy 2.4 compatibility for blanket TBR integration in Python 3.11 CI lane | `src/scpn_fusion/nuclear/blanket_neutronics.py` | Blanket neutronics integration uses version-safe trapezoid evaluation (`np.trapezoid` with legacy fallback) and no longer depends on removed `np.trapz` alias in modern NumPy | `python -m pytest tests/test_blanket_neutronics.py -v`, `docker run --rm -v \"$PWD:/work\" -w /work python:3.11-slim bash -lc \"pip install -e '.[dev]' && pytest tests/ -q -x\"` |
| H7-009 | P1 | Control | Harden optimal-control runner for deterministic non-interactive execution and explicit actuation/current bounds | `src/scpn_fusion/control/fusion_optimal_control.py`, `tests/test_fusion_optimal_control.py` | Optimal-control runtime exposes deterministic summary-return API with injectable kernel, bounded correction/current lanes, CI-safe non-plot mode, and regression coverage for determinism + bounds | `python -m pytest tests/test_fusion_optimal_control.py -v` |
| H7-010 | P1 | Control | Harden SOTA MPC runner for deterministic non-interactive execution and bounded action/current lanes | `src/scpn_fusion/control/fusion_sota_mpc.py`, `tests/test_fusion_sota_mpc.py` | SOTA MPC runtime exposes deterministic summary-return API with injectable kernel, bounded action/current behavior, CI-safe non-plot mode, and regression coverage for determinism + clipping guarantees | `python -m pytest tests/test_fusion_sota_mpc.py -v` |
| H7-011 | P1 | Control | Harden advanced SOC learning runner for deterministic non-interactive execution and bounded exploration/control lanes | `src/scpn_fusion/control/advanced_soc_fusion_learning.py`, `tests/test_advanced_soc_fusion_learning.py` | SOC+Q-learning runtime returns deterministic summary metrics with seed-scoped RNG, bounded external-shear control lane, optional non-plot mode, and regression coverage for determinism/learning updates | `python -m pytest tests/test_advanced_soc_fusion_learning.py -v` |
| H7-012 | P1 | Control | Harden analytic equilibrium solver runner with deterministic summary API and optional non-writing CI path | `src/scpn_fusion/control/analytic_solver.py`, `tests/test_analytic_solver.py` | Analytic solver exposes typed summary-return runner, injectable kernel path, deterministic least-norm/ridge solve with explicit efficiency extraction, and optional config-write suppression for CI | `python -m pytest tests/test_analytic_solver.py -v` |
| H7-013 | P1 | Diagnostics | Harden diagnostics demo runner with deterministic summary API and optional no-figure CI mode | `src/scpn_fusion/diagnostics/run_diagnostics.py`, `tests/test_run_diagnostics.py` | Diagnostics demo returns deterministic summary metrics with injectable kernel/sensor/tomography factories, robust phantom hotspot placement, and optional figure generation path that is fully bypassable in CI | `python -m pytest tests/test_run_diagnostics.py tests/test_diagnostics.py -v` |
| H7-014 | P1 | Diagnostics | Add explicit seeded-RNG lane for synthetic sensor noise to guarantee deterministic diagnostics replay | `src/scpn_fusion/diagnostics/synthetic_sensors.py`, `tests/test_synthetic_sensors.py` | Sensor suite supports deterministic seeded/injected RNG sampling without breaking legacy global-RNG behavior, and regression tests lock seeded equality + invalid seed/rng guard semantics | `python -m pytest tests/test_synthetic_sensors.py tests/test_diagnostics.py tests/test_run_diagnostics.py -v` |
| H7-015 | P1 | Diagnostics | Harden tomography inversion with strict signal guards and deterministic non-SciPy fallback solve path | `src/scpn_fusion/diagnostics/tomography.py`, `tests/test_tomography.py` | Tomography validates chord-signal length/finite inputs, supports bounded regularization controls, and falls back to deterministic non-negative least-squares via NumPy when SciPy linear solver is unavailable | `python -m pytest tests/test_tomography.py tests/test_diagnostics.py tests/test_run_diagnostics.py -v` |
| H7-016 | P1 | Control | Decouple disruption synthetic-shot generation from global NumPy RNG and harden deterministic campaign replay | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_predictor_rng.py` | Tearing-mode simulation accepts scoped RNG for deterministic replay, anomaly campaign no longer mutates global NumPy seed, training data/eval generation use dedicated seeded generators, and regression tests lock seed determinism + global-RNG independence | `python -m pytest tests/test_disruption_predictor_rng.py tests/test_disruption_toroidal_features.py tests/test_gneu_02_anomaly.py -v` |
| H7-017 | P1 | Control | Add deterministic session-level runtime API for digital twin ingest planning with optional chaos injection | `src/scpn_fusion/control/digital_twin_ingest.py`, `tests/test_digital_twin_ingest_runtime.py` | Digital twin ingest exposes typed non-interactive session summary runner with strict machine validation, deterministic chaos/dropout injection controls, and regression tests for determinism + invalid-machine guard behavior | `python -m pytest tests/test_digital_twin_ingest_runtime.py tests/test_gdep_01_digital_twin_hook.py -v` |
| H7-018 | P1 | Diagnostics | Add strict forward-diagnostics input guards for grid/field shape and scalar physics constraints | `src/scpn_fusion/diagnostics/forward.py`, `tests/test_forward_diagnostics_guards.py` | Forward diagnostics now reject non-finite/mismatched field-grid inputs and invalid scalar parameters (`volume_element_m3`, detector efficiency, solid-angle fraction) with deterministic error semantics, while preserving existing valid-channel behavior | `python -m pytest tests/test_forward_diagnostics_guards.py tests/test_diagnostics.py tests/test_run_diagnostics.py tests/test_tomography.py tests/test_synthetic_sensors.py -v` |
| H7-019 | P1 | Nuclear | Harden PWI erosion demo with deterministic summary-return runtime API and CI-safe non-plot mode | `src/scpn_fusion/nuclear/pwi_erosion.py`, `tests/test_pwi_erosion_runtime.py` | PWI erosion scan now exposes a typed non-interactive summary path with finite-input guards, deterministic result metrics, optional plot generation, and regression tests for determinism + invalid range handling | `python -m pytest tests/test_pwi_erosion.py tests/test_pwi_erosion_runtime.py -v` |
| H7-020 | P1 | Nuclear | Harden TEMHD experiment runner with deterministic summary-return runtime API and CI-safe non-plot mode | `src/scpn_fusion/nuclear/temhd_peltier.py`, `tests/test_temhd_peltier_runtime.py` | TEMHD flux-ramp experiment now exposes typed non-interactive summary metrics with finite-range guards, deterministic runtime behavior, optional plot generation, and regression tests for determinism + invalid flux range handling | `python -m pytest tests/test_temhd_peltier.py tests/test_temhd_peltier_runtime.py -v` |
| H7-021 | P1 | Control | Harden fueling-mode runner with deterministic summary-return runtime API and strict input guards | `src/scpn_fusion/control/fueling_mode.py`, `tests/test_fueling_mode_runtime.py` | Fueling mode now exposes a deterministic non-interactive summary path with bounded command/density diagnostics, preserves existing convergence behavior, and rejects invalid target/initial density and timestep inputs with explicit errors | `python -m pytest tests/test_gneu_03_fueling_mode.py tests/test_fueling_mode_runtime.py -v` |
| H7-022 | P1 | Control | Harden SPI mitigation runner with deterministic summary-return runtime API and CI-safe non-plot mode | `src/scpn_fusion/control/spi_mitigation.py`, `tests/test_spi_mitigation_runtime.py` | SPI mitigation now exposes a typed non-interactive summary path with finite-input guards, optional plotting, deterministic CQ diagnostics, and regression tests for determinism + invalid parameter handling | `python -m pytest tests/test_spi_mitigation.py tests/test_spi_mitigation_runtime.py -v` |
| H7-023 | P1 | Control | Decouple tokamak digital twin runtime from global NumPy RNG and add injected-generator replay path | `src/scpn_fusion/control/tokamak_digital_twin.py`, `tests/test_tokamak_digital_twin.py` | Digital twin runtime uses a scoped/injected RNG for network initialization and exploration noise, avoids global `np.random` state mutation, and preserves deterministic replay via fixed-seed injected generators | `python -m pytest tests/test_tokamak_digital_twin.py tests/test_gdep_01_digital_twin_hook.py -v` |
| H7-024 | P1 | Control | Harden neuro-cybernetic controller runtime with deterministic summary-return API and CI-safe non-plot mode | `src/scpn_fusion/control/neuro_cybernetic_controller.py`, `tests/test_neuro_cybernetic_controller.py` | Neuro-cybernetic control now exposes non-interactive deterministic runtime summaries (classical/quantum lanes), supports injectable kernel factory for tests, tracks bounded control/error diagnostics, and validates non-positive duration guards without requiring plot generation | `python -m pytest tests/test_neuro_cybernetic_controller.py tests/test_director_interface.py -v` |
| H7-025 | P1 | Nuclear | Harden blanket-neutronics runtime with deterministic summary-return API and strict incident-flux guards | `src/scpn_fusion/nuclear/blanket_neutronics.py`, `tests/test_blanket_neutronics.py` | Blanket runner now supports CI-safe non-plot execution with typed summary metrics, enforces finite positive incident-flux constraints, preserves rear-albedo validation semantics, and adds deterministic runtime regression coverage | `python -m pytest tests/test_blanket_neutronics.py -v` |
| H7-026 | P1 | Control | Remove global NumPy RNG mutation from tokamak-flight runtime and lock deterministic replay semantics | `src/scpn_fusion/control/tokamak_flight_sim.py`, `tests/test_tokamak_flight_sim.py` | Flight-sim runtime no longer mutates global `np.random` state in deterministic control-only paths, retains stable seeded-summary metadata, and adds regression coverage proving no global RNG side effects | `python -m pytest tests/test_tokamak_flight_sim.py -v` |
| H7-027 | P1 | Control | Remove global NumPy RNG mutation from optimal-control runtime and lock deterministic replay semantics | `src/scpn_fusion/control/fusion_optimal_control.py`, `tests/test_fusion_optimal_control.py` | Optimal-control runtime no longer mutates global `np.random` state in deterministic solve lanes, keeps stable seeded-summary metadata, and adds regression coverage proving no global RNG side effects | `python -m pytest tests/test_fusion_optimal_control.py -v` |
| H7-028 | P1 | Control | Remove residual global NumPy RNG mutation from tearing-mode simulation fallback path | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_predictor_rng.py` | Tearing-mode simulation now always uses scoped RNG sampling (injected or local generator), avoids global `np.random` mutation in fallback calls, and adds regression coverage for global RNG state isolation | `python -m pytest tests/test_disruption_predictor_rng.py tests/test_disruption_toroidal_features.py tests/test_gneu_02_anomaly.py -v` |
| H7-029 | P1 | Validation | Stabilize GNEU-01 benchmark episode synthesis with scoped per-episode RNG | `validation/gneu_01_benchmark.py`, `tests/test_gneu_01_benchmark.py` | GNEU-01 episode generation now uses deterministic seeded local generators passed into tearing-mode synthesis (no global seed coupling), restoring deterministic benchmark replay and eliminating global RNG side effects | `python -m pytest tests/test_gneu_01_benchmark.py tests/test_disruption_predictor_rng.py -v`, `python -m pytest tests/ -q -x` |
| H7-030 | P1 | Diagnostics | Remove global NumPy RNG mutation from diagnostics demo runtime and use scoped sensor RNG wiring | `src/scpn_fusion/diagnostics/run_diagnostics.py`, `tests/test_run_diagnostics.py` | Diagnostics demo now uses a local seeded generator, routes RNG/seed into sensor factory when supported, avoids global `np.random` mutation, and adds regression coverage for global RNG state isolation | `python -m pytest tests/test_run_diagnostics.py tests/test_diagnostics.py -v` |
| H7-031 | P1 | Validation | Remove global NumPy RNG mutation from SCPN PID/MPC benchmark runtime lane | `validation/scpn_pid_mpc_benchmark.py`, `tests/test_scpn_pid_mpc_benchmark.py` | PID/MPC benchmark campaign no longer mutates global `np.random` state in deterministic control-only execution, keeps seeded metadata explicit, and adds regression coverage proving global RNG isolation | `python -m pytest tests/test_scpn_pid_mpc_benchmark.py tests/test_controller.py tests/test_gneu_01_benchmark.py -v` |
| H7-032 | P1 | Core/Validation | Remove global NumPy RNG mutation from global design scanner and GAI-03 campaign path | `src/scpn_fusion/core/global_design_scanner.py`, `validation/gai_03_heat_ml_shadow.py`, `tests/test_gai_03_heat_ml_shadow.py`, `tests/test_gmvr_01_compact_constraints.py` | Global design scans now use scoped generators (seeded when provided) without mutating global RNG state, GAI-03 scan wiring uses explicit seed passthrough, and regression tests lock global RNG isolation for both scanner and campaign lanes | `python -m pytest tests/test_gai_03_heat_ml_shadow.py tests/test_gmvr_01_compact_constraints.py -v`, `python -m pytest tests/ -q -x` |
| H7-033 | P1 | Core | Remove global NumPy RNG mutation from FNO turbulence generator runtime lane | `src/scpn_fusion/core/fno_turbulence_suppressor.py`, `tests/test_fno_training.py` | FNO turbulence generator now uses scoped seeded/injected generators for initial fields and forcing terms, avoids global `np.random` mutation in simulation paths, and adds regression coverage for deterministic replay + global RNG isolation | `python -m pytest tests/test_fno_training.py -v`, `python -m pytest tests/ -q -x` |
| H7-034 | P1 | Core | Harden FNO suppression runtime with deterministic summary-return API and CI-safe non-plot mode | `src/scpn_fusion/core/fno_turbulence_suppressor.py`, `tests/test_fno_training.py` | FNO runtime now exposes typed deterministic summary metrics (energy/suppression), supports optional non-plot execution for CI, preserves seeded replay behavior, and adds regression coverage for deterministic summary outputs | `python -m pytest tests/test_fno_training.py -v`, `python -m pytest tests/ -q -x` |
| H7-035 | P1 | Validation | Add global RNG isolation regression lock for GAI-01 turbulence surrogate campaign | `tests/test_gai_01_turbulence_surrogate.py` | GAI-01 campaign path now has explicit regression coverage proving no global `np.random` state mutation during deterministic training/eval/benchmark execution | `python -m pytest tests/test_gai_01_turbulence_surrogate.py -v`, `python -m pytest tests/ -q -x` |
| H7-036 | P1 | Validation | Harden control resilience campaign input semantics and add global RNG isolation regression lock | `validation/control_resilience_campaign.py`, `tests/test_control_resilience_campaign.py` | Control resilience campaign now rejects invalid campaign ranges/noise parameters (no silent coercion), preserves deterministic seeded campaign metrics, and adds regression coverage proving no global `np.random` state mutation | `python -m pytest tests/test_control_resilience_campaign.py tests/test_disruption_predictor_rng.py tests/test_gneu_02_anomaly.py -v`, `python -m pytest tests/ -q -x` |
| H7-037 | P1 | Control | Harden disruption campaign APIs with strict input guards for fault/noise and anomaly lanes | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_toroidal_features.py`, `tests/test_gneu_02_anomaly.py` | Fault/noise and anomaly campaign entry points now reject invalid range/non-finite arguments instead of silently coercing values, while preserving deterministic seeded behavior and existing threshold metrics for valid runs | `python -m pytest tests/test_disruption_toroidal_features.py tests/test_disruption_predictor_rng.py tests/test_gneu_02_anomaly.py tests/test_control_resilience_campaign.py -v`, `python -m pytest tests/ -q -x` |
| H7-038 | P1 | SCPN | Harden action decode contracts with explicit shape/index/timebase guards | `src/scpn_fusion/scpn/contracts.py`, `tests/test_controller.py` | `decode_actions` now validates per-action vector lengths, rejects non-finite/non-positive `dt`, and raises deterministic errors on invalid action place indices, with regression tests covering all guard paths | `python -m mypy --strict src/scpn_fusion/scpn/contracts.py`, `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-039 | P1 | SCPN | Harden feature extraction contracts with finite-input guards for axis and passthrough lanes | `src/scpn_fusion/scpn/contracts.py`, `tests/test_controller.py` | `extract_features` now rejects non-finite axis observations/targets/scales and passthrough values with deterministic errors, preventing NaN propagation into runtime feature injection while preserving existing deterministic behavior for valid inputs | `python -m mypy --strict src/scpn_fusion/scpn/contracts.py`, `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-040 | P1 | Nuclear | Harden volumetric blanket surrogate with strict geometry/grid/flux input guards | `src/scpn_fusion/nuclear/blanket_neutronics.py`, `tests/test_blanket_neutronics.py` | Volumetric blanket surrogate now rejects invalid/non-finite geometry, mesh, and incident-flux inputs with deterministic errors (no silent coercion), while preserving deterministic TBR trends and runtime summaries for valid campaigns | `python -m pytest tests/test_blanket_neutronics.py -v`, `python -m pytest tests/ -q -x` |
| H7-041 | P1 | Nuclear | Harden ash-poisoning runtime with strict burn-time and confinement-ratio input guards | `src/scpn_fusion/nuclear/nuclear_wall_interaction.py`, `tests/test_nuclear_wall_interaction.py` | Ash-poisoning simulation now rejects invalid/non-finite `burn_time_sec` and `tau_He_ratio` inputs with deterministic errors (no silent coercion), while preserving pumping-efficiency behavior and deterministic runtime summaries for valid inputs | `python -m pytest tests/test_nuclear_wall_interaction.py -v`, `python -m pytest tests/ -q -x` |
| H7-042 | P1 | Nuclear | Harden TEMHD runtime campaign with strict sweep-grid and settle-step input guards | `src/scpn_fusion/nuclear/temhd_peltier.py`, `tests/test_temhd_peltier_runtime.py` | TEMHD experiment runner now rejects invalid/non-finite sweep-grid/runtime arguments (`flux_points`, `settle_steps_per_flux`, `dt_s`) with deterministic errors (no silent coercion), while preserving deterministic surface-temperature and effective-conductivity summaries for valid runs | `python -m pytest tests/test_temhd_peltier_runtime.py tests/test_temhd_peltier.py -v`, `python -m pytest tests/ -q -x` |
| H7-043 | P1 | Nuclear | Harden PWI runtime campaign with strict scan-grid size validation | `src/scpn_fusion/nuclear/pwi_erosion.py`, `tests/test_pwi_erosion_runtime.py` | PWI erosion runtime now rejects invalid `num_points` values with deterministic errors (no silent coercion), while preserving deterministic erosion/yield summaries for valid scans | `python -m pytest tests/test_pwi_erosion_runtime.py tests/test_pwi_erosion.py -v`, `python -m pytest tests/ -q -x` |
| H7-044 | P1 | Validation | Harden GNEU-01 benchmark campaign with strict runtime input guards | `validation/gneu_01_benchmark.py`, `tests/test_gneu_01_benchmark.py` | GNEU-01 benchmark runner now rejects invalid/non-finite campaign parameters (`episodes`, `window`, `recovery_window_steps`, `recovery_epsilon`, `dt_ms`) with deterministic errors (no silent coercion), while preserving deterministic agreement/recovery metrics for valid runs | `python -m pytest tests/test_gneu_01_benchmark.py -v`, `python -m pytest tests/ -q -x` |
| H7-045 | P1 | Control | Harden digital-twin ingest runtime with strict session and chaos-parameter input guards | `src/scpn_fusion/control/digital_twin_ingest.py`, `tests/test_digital_twin_ingest_runtime.py` | Realtime digital-twin session runner now rejects invalid/non-finite session sizing and chaos parameters (`samples`, `dt_ms`, `horizon`, `plan_every`, `chaos_dropout_prob`, `chaos_noise_std`) with deterministic errors (no silent coercion), while preserving deterministic planning metrics for valid runs | `python -m pytest tests/test_digital_twin_ingest_runtime.py tests/test_gdep_01_digital_twin_hook.py -v`, `python -m pytest tests/ -q -x` |
| H7-046 | P1 | Control | Harden digital-twin helper surfaces with strict stream/buffer/horizon input guards | `src/scpn_fusion/control/digital_twin_ingest.py`, `tests/test_gdep_01_digital_twin_hook.py`, `tests/test_digital_twin_ingest_runtime.py` | Digital-twin helper paths now reject invalid stream cadence, ring-buffer capacity, and scenario-horizon values (`samples`, `dt_ms`, `max_buffer`, `horizon`) with deterministic errors (no silent coercion), while preserving deterministic planning behavior and session metrics for valid runs | `python -m pytest tests/test_gdep_01_digital_twin_hook.py tests/test_digital_twin_ingest_runtime.py -v`, `python -m pytest tests/ -q -x` |
| H7-047 | P1 | Validation | Harden GDEP-01 campaign interfaces with strict chaos/runtime input guards | `validation/gdep_01_digital_twin_hook.py`, `tests/test_gdep_01_digital_twin_hook.py` | GDEP-01 campaign paths now reject invalid/non-finite campaign and chaos parameters (`samples_per_machine`, `chaos_dropout_prob`, `chaos_noise_std`) with deterministic errors (no silent coercion/metadata clipping), while preserving seeded deterministic campaign outcomes for valid runs | `python -m pytest tests/test_gdep_01_digital_twin_hook.py tests/test_digital_twin_ingest_runtime.py -v`, `python -m pytest tests/ -q -x` |
| H7-048 | P1 | Validation | Harden SCPN-vs-PID/MPC benchmark campaign with strict step-count input guard | `validation/scpn_pid_mpc_benchmark.py`, `tests/test_scpn_pid_mpc_benchmark.py` | PID/MPC benchmark campaign now rejects invalid `steps` values with deterministic errors (no silent coercion to minimum), while preserving deterministic seeded metrics, runtime-lane reporting, and threshold checks for valid runs | `python -m pytest tests/test_scpn_pid_mpc_benchmark.py -v`, `python -m pytest tests/ -q -x` |
| H7-049 | P1 | Control | Harden fueling-mode runtime campaign with strict integration-step and timestep guards | `src/scpn_fusion/control/fueling_mode.py`, `tests/test_gneu_03_fueling_mode.py` | Fueling simulation now rejects invalid integration horizons (`steps`) and overly small timesteps (`dt_s`) with deterministic errors (no silent coercion/flooring), while preserving deterministic convergence behavior and threshold outcomes for valid runs | `python -m pytest tests/test_gneu_03_fueling_mode.py -v`, `python -m pytest tests/ -q -x` |
| H7-050 | P1 | Control | Harden TORAX-hybrid campaign with strict episode and per-episode-step input guards | `src/scpn_fusion/control/torax_hybrid_loop.py`, `tests/test_gai_02_torax_hybrid.py` | TORAX-hybrid campaign now rejects invalid runtime horizon parameters (`episodes`, `steps_per_episode`) with deterministic errors (no silent coercion), while preserving deterministic avoidance/parity/latency behavior for valid campaigns | `python -m pytest tests/test_gai_02_torax_hybrid.py -v`, `python -m pytest tests/ -q -x` |
| H7-051 | P1 | Control | Harden tokamak digital-twin runtime with strict timestep-count input guard | `src/scpn_fusion/control/tokamak_digital_twin.py`, `tests/test_tokamak_digital_twin.py` | Digital-twin runtime now rejects invalid `time_steps` values with deterministic errors (no silent coercion to minimum), while preserving deterministic seeded summaries, surrogate hooks, and RNG-isolation behavior for valid runs | `python -m pytest tests/test_tokamak_digital_twin.py -v`, `python -m pytest tests/ -q -x` |
| H7-052 | P1 | Control | Harden tokamak flight-sim runtime with strict shot-duration input guard | `src/scpn_fusion/control/tokamak_flight_sim.py`, `tests/test_tokamak_flight_sim.py` | Flight-sim runtime now rejects invalid `shot_duration` values with deterministic errors (no silent coercion to minimum), while preserving deterministic seeded summary and actuator-lag metrics for valid runs | `python -m pytest tests/test_tokamak_flight_sim.py -v`, `python -m pytest tests/ -q -x` |
| H7-053 | P1 | Control | Harden tokamak flight-sim actuator/control timebase constructors with strict finite-positive guards | `src/scpn_fusion/control/tokamak_flight_sim.py`, `tests/test_tokamak_flight_sim.py` | Flight-sim actuator and controller constructors now reject invalid/non-finite `tau_s`, `dt_s`, and `control_dt_s` values with deterministic errors (no silent coercion), while preserving deterministic runtime behavior for valid control loops | `python -m pytest tests/test_tokamak_flight_sim.py -v`, `python -m pytest tests/ -q -x` |
| H7-054 | P1 | Control | Harden fusion control-room runtime with strict simulation-duration input guard | `src/scpn_fusion/control/fusion_control_room.py`, `tests/test_fusion_control_room.py` | Control-room runtime now rejects invalid `sim_duration` values with deterministic errors (no silent coercion to minimum), while preserving deterministic seeded analytic/kernel-backed summary behavior for valid runs | `python -m pytest tests/test_fusion_control_room.py -v`, `python -m pytest tests/ -q -x` |
| H7-055 | P1 | Control | Harden control-room physics-engine constructor with strict grid-size input guard | `src/scpn_fusion/control/fusion_control_room.py`, `tests/test_fusion_control_room.py` | Control-room physics engine now rejects invalid `size` values with deterministic errors (no silent coercion to minimum), while preserving deterministic seeded analytic/kernel-backed behavior for valid configurations | `python -m pytest tests/test_fusion_control_room.py -v`, `python -m pytest tests/ -q -x` |
| H7-056 | P1 | Control | Harden SOTA-MPC runtime campaign with strict shot-length and disturbance-start input guards | `src/scpn_fusion/control/fusion_sota_mpc.py`, `tests/test_fusion_sota_mpc.py` | SOTA-MPC campaign now rejects invalid runtime horizon parameters (`shot_length`, `disturbance_start_step`) with deterministic errors (no silent coercion), while preserving deterministic seeded tracking metrics and bounded-action behavior for valid runs | `python -m pytest tests/test_fusion_sota_mpc.py -v`, `python -m pytest tests/ -q -x` |
| H7-057 | P1 | Control | Harden optimal-control runtime campaign with strict shot-step input guard | `src/scpn_fusion/control/fusion_optimal_control.py`, `tests/test_fusion_optimal_control.py` | Optimal-control shot runtime now rejects invalid `shot_steps` values with deterministic errors (no silent coercion to minimum), while preserving deterministic bounded-control summaries for valid runs | `python -m pytest tests/test_fusion_optimal_control.py -v`, `python -m pytest tests/ -q -x` |
| H7-058 | P1 | Control | Harden optimal-control constructor/system-ID/regularization knobs with strict numeric guards | `src/scpn_fusion/control/fusion_optimal_control.py`, `tests/test_fusion_optimal_control.py` | Optimal-control paths now reject invalid/non-finite `correction_limit`, `perturbation`, and `regularization_limit` values with deterministic errors (no silent coercion), while preserving deterministic bounded-control behavior for valid settings | `python -m pytest tests/test_fusion_optimal_control.py -v`, `python -m pytest tests/ -q -x` |
| H7-059 | P1 | Control | Harden SOTA-MPC controller constructor knobs with strict numeric guards | `src/scpn_fusion/control/fusion_sota_mpc.py`, `tests/test_fusion_sota_mpc.py` | MPC-controller constructor now rejects invalid/non-finite `prediction_horizon`, `learning_rate`, `iterations`, `action_limit`, and `action_regularization` values with deterministic errors (no silent coercion), while preserving deterministic bounded-action planning for valid settings | `python -m pytest tests/test_fusion_sota_mpc.py -v`, `python -m pytest tests/ -q -x` |
| H7-060 | P1 | Control | Harden SOTA-MPC surrogate training with strict perturbation guard | `src/scpn_fusion/control/fusion_sota_mpc.py`, `tests/test_fusion_sota_mpc.py` | Surrogate training now rejects invalid/non-finite `perturbation` values with deterministic errors (no silent coercion), while preserving deterministic surrogate-response fitting and bounded-action campaign behavior for valid inputs | `python -m pytest tests/test_fusion_sota_mpc.py -v`, `python -m pytest tests/ -q -x` |
| H7-061 | P1 | Control | Harden director-interface runtime mission with strict duration/glitch input guards | `src/scpn_fusion/control/director_interface.py`, `tests/test_director_interface.py` | Directed mission runtime now rejects invalid/non-finite mission parameters (`duration`, `glitch_start_step`, `glitch_std`) with deterministic errors (no silent coercion), while preserving deterministic fallback-director mission behavior for valid runs | `python -m pytest tests/test_director_interface.py -v`, `python -m pytest tests/ -q -x` |
| H7-062 | P1 | Control | Harden tearing-mode simulation with strict step-count input guard | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_predictor_rng.py` | Tearing-mode simulator now rejects invalid `steps` values with deterministic errors (no silent coercion to minimum), while preserving deterministic RNG-scoped signal generation and anomaly-campaign behavior for valid runs | `python -m pytest tests/test_disruption_predictor_rng.py tests/test_disruption_toroidal_features.py tests/test_gneu_02_anomaly.py -v`, `python -m pytest tests/ -q -x` |
| H7-063 | P1 | Control | Harden disruption-predictor sequence-length handling with strict guardrails | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_gneu_02_anomaly.py` | Predictor sequence handling now rejects invalid `seq_len` values with deterministic errors (no silent coercion to minimum), while preserving deterministic fallback/checkpoint behavior and risk-evaluation paths for valid sequence lengths | `python -m pytest tests/test_gneu_02_anomaly.py tests/test_disruption_predictor_rng.py tests/test_disruption_toroidal_features.py -v`, `python -m pytest tests/ -q -x` |
| H7-064 | P1 | Control | Harden fallback-director constructor with strict entropy/window input guards | `src/scpn_fusion/control/director_interface.py`, `tests/test_director_interface.py` | Fallback director now rejects invalid/non-finite `entropy_threshold` and `history_window` values with deterministic errors (no silent coercion), while preserving deterministic mission-review behavior for valid settings | `python -m pytest tests/test_director_interface.py -v`, `python -m pytest tests/ -q -x` |
| H7-065 | P1 | Control | Harden disruption-predictor training campaign with strict shot/epoch input guards | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_model_checkpoint.py` | Predictor training now rejects invalid `n_shots` and `epochs` values with deterministic errors (no silent coercion), while preserving deterministic checkpoint load/train behavior and fallback paths for valid inputs | `python -m pytest tests/test_disruption_model_checkpoint.py tests/test_gneu_02_anomaly.py tests/test_disruption_predictor_rng.py tests/test_disruption_toroidal_features.py -v`, `python -m pytest tests/ -q -x` |
| H7-066 | P1 | Control | Harden advanced SOC runtime campaign with strict step/shear/noise input guards | `src/scpn_fusion/control/advanced_soc_fusion_learning.py`, `tests/test_advanced_soc_fusion_learning.py` | Advanced SOC runtime now rejects invalid/non-finite campaign parameters (`time_steps`, `shear_step`, `noise_probability`) with deterministic errors (no silent coercion/clipping), while preserving deterministic seeded learning dynamics for valid runs | `python -m pytest tests/test_advanced_soc_fusion_learning.py -v`, `python -m pytest tests/ -q -x` |
| H7-067 | P1 | Control | Harden advanced SOC reactor/agent constructors with strict parameter guards | `src/scpn_fusion/control/advanced_soc_fusion_learning.py`, `tests/test_advanced_soc_fusion_learning.py` | Advanced SOC constructors now reject invalid/non-finite reactor and agent parameters (`size`, `flow_generation`, `flow_damping`, `shear_efficiency`, `max_sub_steps`, `alpha`, `gamma`, `epsilon`, `n_states_turb`, `n_states_flow`, `n_actions`) with deterministic errors (no silent coercion/clipping), while preserving deterministic seeded campaign behavior for valid configurations | `python -m pytest tests/test_advanced_soc_fusion_learning.py -v`, `python -m pytest tests/ -q -x` |
| H7-068 | P1 | HPC | Harden native convergence bridge with strict max-iteration/tolerance/omega guards | `src/scpn_fusion/hpc/hpc_bridge.py`, `tests/test_hpc_bridge.py` | HPC convergence path now rejects invalid/non-finite solver controls (`max_iterations`, `tolerance`, `omega`) with deterministic errors (no silent coercion/clipping), while preserving native/fallback solve behavior and deterministic output-buffer reuse for valid runs | `python -m pytest tests/test_hpc_bridge.py -v`, `python -m pytest tests/ -q -x` |
| H7-069 | P1 | Diagnostics | Harden forward interferometer runtime with strict sample/wavelength guards | `src/scpn_fusion/diagnostics/forward.py`, `tests/test_forward_diagnostics_guards.py` | Forward interferometer path now rejects invalid/non-finite runtime controls (`samples`, `laser_wavelength_m`) with deterministic errors (no silent coercion/flooring), while preserving deterministic channel synthesis and diagnostics-suite compatibility for valid inputs | `python -m pytest tests/test_forward_diagnostics_guards.py tests/test_diagnostics.py tests/test_run_diagnostics.py tests/test_tomography.py tests/test_synthetic_sensors.py -v`, `python -m pytest tests/ -q -x` |
| H7-070 | P1 | IO/Control | Harden IDS-to-digital-twin time-slice decoding with strict non-negative finite guards | `src/scpn_fusion/io/imas_connector.py`, `tests/test_tokamak_digital_twin.py` | IDS import path now rejects invalid/non-finite `time_slice.time_s` values with deterministic errors (no silent floor-to-zero coercion), while preserving deterministic IDS roundtrip semantics for valid payloads | `python -m pytest tests/test_tokamak_digital_twin.py -v`, `python -m pytest tests/ -q -x` |
| H7-071 | P1 | Control | Harden spiking-controller constructor with strict neuron/window/timebase/noise guards | `src/scpn_fusion/control/neuro_cybernetic_controller.py`, `tests/test_neuro_cybernetic_controller.py` | Spiking controller pool now rejects invalid/non-finite constructor controls (`n_neurons`, `tau_window`, `gain`, `dt_s`, `tau_mem_s`, `noise_std`) with deterministic errors (no silent coercion/flooring), while preserving deterministic fallback/backend behavior for valid settings | `python -m pytest tests/test_neuro_cybernetic_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-072 | P1 | Diagnostics | Harden tomography constructor with strict grid/regularization input guards | `src/scpn_fusion/diagnostics/tomography.py`, `tests/test_tomography.py` | Tomography constructor now rejects invalid/non-finite setup controls (`grid_res`, `lambda_reg`) with deterministic errors (no silent coercion/flooring), while preserving deterministic reconstruction and SciPy-fallback solve behavior for valid inputs | `python -m pytest tests/test_tomography.py tests/test_diagnostics.py tests/test_run_diagnostics.py tests/test_forward_diagnostics_guards.py tests/test_synthetic_sensors.py -v`, `python -m pytest tests/ -q -x` |
| H7-073 | P1 | Core/Validation | Harden GPU runtime bridge with strict benchmark and iteration input guards | `src/scpn_fusion/core/gpu_runtime.py`, `tests/test_gdep_02_gpu_integration.py` | GPU runtime bridge now rejects invalid runtime controls (`trials`, `grid_size`, `iterations`) with deterministic errors (no silent coercion/flooring), while preserving deterministic speedup estimates and campaign threshold behavior for valid inputs | `python -m pytest tests/test_gdep_02_gpu_integration.py -v`, `python -m pytest tests/ -q -x` |
| H7-074 | P1 | Control | Harden hybrid anomaly-detector constructor with strict threshold/EMA input guards | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_gneu_02_anomaly.py` | Hybrid anomaly detector now rejects invalid/non-finite constructor controls (`threshold`, `ema`) with deterministic errors (no silent clipping/flooring), while preserving deterministic scoring/alarm behavior for valid settings | `python -m pytest tests/test_gneu_02_anomaly.py tests/test_disruption_predictor_rng.py tests/test_disruption_toroidal_features.py -v`, `python -m pytest tests/ -q -x` |
| H7-075 | P1 | SCPN | Harden controller runtime-sampling constructor knobs with strict numeric guards | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | SCPN controller constructor now rejects invalid/non-finite runtime-sampling controls (`sc_n_passes`, `sc_bitflip_rate`, `rust_backend_min_problem_size`, `sc_antithetic_chunk_size`) with deterministic errors (no silent coercion/clipping), while preserving deterministic backend and sampling behavior for valid settings | `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-076 | P1 | SCPN | Harden controller binary-margin constructor knob with strict numeric guards | `src/scpn_fusion/scpn/controller.py`, `tests/test_controller.py` | SCPN controller constructor now rejects invalid/non-finite `sc_binary_margin` values (no silent floor-to-zero coercion), while preserving deterministic adaptive/traceable firing semantics for valid settings | `python -m mypy --strict src/scpn_fusion/scpn/controller.py`, `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-077 | P1 | Control | Harden bit-flip fault injection helper with strict bit-index guardrails | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_toroidal_features.py` | Fault injection now rejects invalid/non-integer `bit_index` values outside `[0, 63]` (no silent modulo wrapping), while preserving deterministic finite-value bit flips for valid indices | `python -m pytest tests/test_disruption_toroidal_features.py tests/test_disruption_predictor_rng.py tests/test_gneu_02_anomaly.py -v`, `python -m pytest tests/ -q -x` |
| H7-078 | P1 | Control | Harden disruption campaign/simulation integer inputs with strict type/range guards | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_predictor_rng.py`, `tests/test_disruption_toroidal_features.py`, `tests/test_gneu_02_anomaly.py` | Disruption simulation and campaign entry points now reject non-integer or out-of-range sizing inputs (`steps`, `seed`, `episodes`, `window`, `bit_flip_interval`, `recovery_window`) with deterministic errors (no silent float-to-int coercion), while preserving deterministic seeded metrics for valid runs | `python -m pytest tests/test_disruption_predictor_rng.py tests/test_disruption_toroidal_features.py tests/test_gneu_02_anomaly.py -v`, `python -m pytest tests/ -q -x` |
| H7-079 | P1 | Control | Harden disruption predictor sequence/training integer knobs with strict type/range guards | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_model_checkpoint.py`, `tests/test_gneu_02_anomaly.py` | Predictor load/train paths now reject non-integer or out-of-range controls (`seq_len`, `n_shots`, `epochs`, `seed`) with deterministic errors (no silent float-to-int coercion), while preserving deterministic checkpoint fallback/training behavior for valid settings | `python -m pytest tests/test_disruption_model_checkpoint.py tests/test_gneu_02_anomaly.py -v`, `python -m pytest tests/ -q -x` |
| H7-080 | P1 | Control | Harden disruption feature-vector inputs with finite signal/observable guards | `src/scpn_fusion/control/disruption_predictor.py`, `tests/test_disruption_toroidal_features.py` | Disruption feature extraction now rejects non-finite signal samples and non-finite toroidal observable terms with deterministic errors (no NaN/Inf propagation into risk scores), while preserving deterministic risk trends for valid channels | `python -m pytest tests/test_disruption_toroidal_features.py tests/test_disruption_predictor_rng.py tests/test_gneu_02_anomaly.py -v`, `python -m pytest tests/ -q -x` |
| H7-081 | P1 | SCPN | Harden artifact transition delay parsing with strict integer guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects non-integer transition `delay_ticks` values with deterministic validation errors (no silent cast/floor coercion), while preserving delay semantics for valid integer artifacts | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-082 | P1 | SCPN | Harden artifact stream-length parsing with strict integer guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects non-integer `meta.stream_length` values with deterministic validation errors (no silent cast/floor coercion), while preserving valid integer stream-length semantics and controller runtime behavior | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-083 | P1 | SCPN | Harden artifact control-timestep validation with finite-value guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects non-finite `meta.dt_control_s` values (`NaN`/`Inf`) with deterministic validation errors, preventing invalid control timesteps from bypassing runtime checks | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-084 | P1 | SCPN | Harden artifact fixed-point metadata validation with strict type/range guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects invalid fixed-point metadata (`data_width`, `fraction_bits`, `signed`) when types/ranges are inconsistent, preventing malformed control-word semantics from entering runtime | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-085 | P1 | SCPN | Harden artifact dt-control parsing with strict numeric type guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects non-numeric/boolean `meta.dt_control_s` values at parse time (no silent cast from strings/bools), while preserving finite positive timestep validation for valid numeric artifacts | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-086 | P1 | SCPN | Harden artifact fixed-point scale consistency with strict fractional-width guard | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects fixed-point configurations where `fraction_bits >= data_width`, preventing invalid control-word scale definitions from entering runtime | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-087 | P1 | SCPN | Harden artifact transition threshold/margin parsing with strict numeric guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects non-numeric/non-finite transition `threshold`/`margin` values (and negative margins) without silent casts, preventing malformed transition semantics from entering runtime | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-088 | P1 | SCPN | Harden artifact readout vector parsing with strict numeric/range guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects malformed readout vectors (`gains`, `abs_max`, `slew_per_s`) when types, finiteness, lengths, or non-negativity constraints are violated, preventing invalid action-scaling semantics from entering runtime | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-089 | P1 | SCPN | Harden artifact place-injection parsing with strict type/index/finiteness guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects malformed `initial_state.place_injections` fields (`place_id`, `source`, `scale`, `offset`, `clamp_0_1`) without silent casts, preventing invalid feature-injection semantics from entering runtime | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H7-090 | P1 | SCPN | Harden artifact readout-action metadata with strict id/name/place-index guardrails | `src/scpn_fusion/scpn/artifact.py`, `tests/test_controller.py` | Artifact loading now rejects malformed readout action specs (`id`, `name`, `pos_place`, `neg_place`) with deterministic validation errors, preventing invalid action-place routing from entering runtime | `python -m pytest tests/test_controller.py -v`, `python -m pytest tests/ -q -x` |
| H8-001 | P1 | Interop | Harden IMAS/IDS digital-twin adapter with strict numeric typing and millisecond-grid time-slice guards | `src/scpn_fusion/io/imas_connector.py`, `tests/test_tokamak_digital_twin.py` | IDS mapping now rejects malformed metadata and payload fields (`machine`, `shot`, `run`, axis/performance scalars, islands count, `time_slice.index`) and disallows non-millisecond `time_slice.time_s` values to prevent silent coercion/rounding in interop loops | `python -m pytest tests/test_tokamak_digital_twin.py -q`, `python -m pytest tests/ -q -x` |
| H8-002 | P1 | Operations | Harden Rust digital-twin fault/actuator constructor paths with strict finite-range guards (no silent clamping) | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs` | OU noise layers, chaos configuration, and actuator delay line constructors now reject invalid inputs via explicit `Result` errors (`theta`, `sigma`, `dt`, `dropout_prob`, `gaussian_noise_std`, `n_channels`, `n_actions`, `lag_alpha`) instead of silently clamping, with deterministic guard regression coverage | `cargo test -p fusion-control digital_twin` |
| H8-003 | P1 | Physics | Harden alpha test-particle seeding with strict finite-range guardrails (no silent clamping) | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | Alpha particle seeding now rejects invalid inputs (`n_particles`, `major_radius_m`, `z_m`, `kinetic_energy_mev`, `pitch_cos`, `weight_per_particle`) via explicit `FusionResult` errors instead of silently coercing/clamping, with regression tests locking invalid-parameter rejection and valid energy-band behavior | `cargo test -p fusion-core particles` |
| H8-004 | P1 | Physics | Harden particle-current coupling controls with strict finite-range validation (no silent clamping) | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs`, `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | Particle-current coupling now rejects invalid/non-finite values in both kernel feedback setup and current blending (`coupling`, `particle_coupling`, `i_target`) via explicit `FusionError` results instead of silent coercion/clamping, with regression tests for invalid coupling and target current guards | `cargo test -p fusion-core particles::tests::test_blend_particle_current_rejects_invalid_coupling_and_target -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_invalid_coupling -- --nocapture` |
| H8-005 | P1 | Physics | Harden particle runaway-threshold handling with strict finite non-negative validation (no silent clamping) | `scpn-fusion-rs/crates/fusion-core/src/particles.rs`, `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | Particle-population summary now rejects invalid `runaway_threshold_mev` values (`NaN`, negative) via explicit `FusionError` results instead of silently clamping to zero, and kernel population-feedback path propagates the validation error deterministically | `cargo test -p fusion-core particles::tests::test_population_summary_rejects_invalid_threshold -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_invalid_threshold -- --nocapture` |
| H8-006 | P1 | Physics | Harden toroidal-mode spectrum setup with strict finite non-negative validation (no silent coercion) | `scpn-fusion-rs/crates/fusion-core/src/transport.rs` | Transport toroidal-spectrum setup now rejects invalid inputs (`gain`, mode amplitudes) via explicit `FusionError` results instead of silently applying `max(0)`/`abs()` coercions, while preserving edge-coupling cap dynamics for valid spectra | `cargo test -p fusion-core transport::tests::test_toroidal_mode_spectrum_rejects_invalid_inputs -- --nocapture`, `cargo test -p fusion-core transport::tests::test_toroidal_mode_coupling_boosts_edge_more_than_core -- --nocapture`, `cargo test -p fusion-core transport::tests::test_toroidal_mode_coupling_factor_is_clamped -- --nocapture` |
| H8-007 | P1 | Physics | Harden AMR solver constructor controls with strict finite-range validation (no silent blend clamping) | `scpn-fusion-rs/crates/fusion-core/src/amr_kernel.rs` | AMR solver setup now rejects invalid constructor controls (`blend`, `omega`, iteration counts) via explicit `FusionError::ConfigError` results instead of silently clamping blend at solve time, while preserving multilevel refinement behavior for valid configs | `cargo test -p fusion-core amr_kernel::tests::test_amr_kernel_rejects_invalid_constructor_config -- --nocapture`, `cargo test -p fusion-core amr_kernel::tests::test_amr_kernel_no_refinement_matches_coarse -- --nocapture`, `cargo test -p fusion-core amr_kernel::tests::test_amr_kernel_runs_with_refinement -- --nocapture` |
| H8-008 | P1 | Physics | Harden inverse solver configuration controls with strict finite-range validation (no silent clamping) | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Inverse reconstruction paths now reject invalid solver controls (`max_iterations`, `tolerance`, `damping`, `fd_step`, `tikhonov`, `kernel_max_iterations`) via explicit `FusionError::ConfigError` validation, replacing prior silent coercions (`clamp`/`max`/`abs`) in damping, finite-difference step, regularization, and kernel iteration setup | `cargo test -p fusion-core inverse::tests::test_inverse_rejects_invalid_solver_config -- --nocapture`, `cargo test -p fusion-core inverse::tests::test_kernel_inverse_rejects_invalid_kernel_iteration_config -- --nocapture`, `cargo test -p fusion-core inverse::tests::test_fd_and_analytical_modes_agree -- --nocapture` |
| H8-009 | P1 | Physics | Harden alpha-heating confinement-time handling with strict finite positive validation (no silent clamping) | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | Alpha-heating profile generation now rejects invalid `confinement_tau_s` values (`NaN`, `<=0`) via explicit `FusionError` results instead of silently clamping to a floor value, preserving deterministic heating behavior for valid confinement times | `cargo test -p fusion-core particles::tests::test_alpha_heating_profile_rejects_invalid_confinement_time -- --nocapture`, `cargo test -p fusion-core particles::tests::test_alpha_heating_profile_is_positive_when_particles_in_domain -- --nocapture`, `cargo test -p fusion-core particles::tests::test_seed_alpha_particles_matches_requested_energy_band -- --nocapture` |
| H8-010 | P1 | Physics | Harden AMR constructor threshold/level controls with strict validity checks | `scpn-fusion-rs/crates/fusion-core/src/amr_kernel.rs` | AMR constructor now rejects invalid `max_levels` and `refinement_threshold` values (`0`, `NaN`, negative, `-inf`) via explicit `FusionError::ConfigError` instead of accepting undefined refinement settings, while preserving the `+inf` threshold no-refinement behavior | `cargo test -p fusion-core amr_kernel::tests::test_amr_kernel_rejects_invalid_constructor_config -- --nocapture`, `cargo test -p fusion-core amr_kernel::tests::test_amr_kernel_no_refinement_matches_coarse -- --nocapture` |
| H8-011 | P1 | Tooling | Resolve Rust CI clippy regression in inverse-config hardening tests | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Refactored kernel-iteration guard regression test to use struct-literal initialization (`..Default::default()`) and removed post-default field reassignment, clearing `clippy::field_reassign_with_default` under `-D warnings` in `rust-tests` | `cargo clippy --all-targets --all-features -- -D warnings`, `cargo test -p fusion-core inverse::tests::test_kernel_inverse_rejects_invalid_kernel_iteration_config -- --nocapture` |
| H8-012 | P1 | Physics | Harden pedestal model constructor controls with strict finite-range validation | `scpn-fusion-rs/crates/fusion-core/src/pedestal.rs`, `scpn-fusion-rs/crates/fusion-core/src/transport.rs` | Pedestal model setup now rejects invalid configuration inputs (`beta_p_ped`, `rho_s`, `r_major`, `alpha_crit`, `tau_elm`) via explicit `FusionError::ConfigError`, replacing prior silent `abs/max` coercions in pedestal-width and ELM-time handling while preserving valid transport/pedestal behavior | `cargo clippy --all-targets --all-features -- -D warnings`, `cargo test -p fusion-core pedestal::tests::test_pedestal_constructor_rejects_invalid_config -- --nocapture`, `cargo test -p fusion-core transport::tests::test_elm_crash_reduces_pedestal_temperature -- --nocapture` |
| H8-013 | P1 | Runtime | Harden JIT compile-spec controls with strict finite/range validation (no silent sanitization) | `scpn-fusion-rs/crates/fusion-core/src/jit.rs` | Runtime JIT compile paths now reject invalid compile-spec inputs (`n_state`, `n_control`, `dt_s`, `unroll_factor`) via explicit `FusionError::ConfigError` results instead of silently coercing/flooring values, while preserving deterministic cache reuse and regime hot-swap behavior for valid specs | `cargo test -p fusion-core jit::tests::test_compile_for_regime_rejects_invalid_compile_specs -- --nocapture`, `cargo test -p fusion-core jit::tests::test_refresh_for_observation_compiles_once_per_regime -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-014 | P1 | Control | Harden delay-dynamics MPC actuator lag handling with strict finite-range validation (no silent clamping) | `scpn-fusion-rs/crates/fusion-control/src/mpc.rs` | Delay-dynamics MPC now rejects invalid `actuator_lag_alpha` values (`NaN`, outside `[0, 1]`) via explicit `FusionError::ConfigError` instead of silently clamping, while preserving deterministic delayed-action rollout semantics for valid lag coefficients | `cargo test -p fusion-control mpc::tests::test_mpc_delay_dynamics_rejects_invalid_actuator_lag_alpha -- --nocapture`, `cargo test -p fusion-control mpc::tests::test_mpc_delay_dynamics_path -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-015 | P1 | Physics | Harden finite-difference Jacobian step handling with strict finite-positive validation (no silent coercion) | `scpn-fusion-rs/crates/fusion-core/src/jacobian.rs`, `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | FD Jacobian construction now rejects invalid `fd_step` values (`NaN`, `<=0`) via explicit `FusionError::ConfigError` instead of silently coercing with `abs/max`, and inverse reconstruction propagates these validation errors deterministically when using finite-difference Jacobians | `cargo test -p fusion-core jacobian::tests::test_fd_jacobian_rejects_invalid_fd_step -- --nocapture`, `cargo test -p fusion-core jacobian::tests::test_analytical_vs_fd_jacobian -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-016 | P1 | Runtime | Harden JIT observation refresh with strict finite-value guards | `scpn-fusion-rs/crates/fusion-core/src/jit.rs` | JIT observation-refresh path now rejects non-finite regime-observation inputs (`beta_n`, `q95`, `density_line_avg_1e20_m3`, `current_ramp_ma_s`) via explicit `FusionError::ConfigError`, preventing silent NaN/Inf routing while preserving deterministic compile-cache behavior for valid telemetry | `cargo test -p fusion-core jit::tests::test_refresh_for_observation_rejects_non_finite_inputs -- --nocapture`, `cargo test -p fusion-core jit::tests::test_refresh_for_observation_compiles_once_per_regime -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-017 | P1 | Control | Harden delay-aware MPC vector-shape handling with strict length validation | `scpn-fusion-rs/crates/fusion-control/src/mpc.rs` | Delay-aware MPC paths now reject malformed input vector shapes (sensor bias/noise length mismatches and delayed-action coil-count mismatches) via explicit `FusionError::ConfigError` instead of silently ignoring invalid vectors, while preserving deterministic rollout behavior for valid inputs | `cargo test -p fusion-control mpc::tests::test_mpc_delay_and_bias_rejects_mismatched_vector_lengths -- --nocapture`, `cargo test -p fusion-control mpc::tests::test_mpc_delay_dynamics_rejects_mismatched_vector_lengths -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-018 | P1 | Control | Harden MPC core state/target/action shape validation in surrogate and planner paths | `scpn-fusion-rs/crates/fusion-control/src/mpc.rs` | MPC surrogate prediction and planner paths now reject incompatible state/target/action dimensions via explicit `FusionError::ConfigError` instead of allowing shape mismatch panics, while preserving deterministic optimization behavior for valid dimensions | `cargo test -p fusion-control mpc::tests::test_mpc_constructor_rejects_target_length_mismatch -- --nocapture`, `cargo test -p fusion-control mpc::tests::test_surrogate_predict_rejects_state_and_action_shape_mismatch -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-019 | P1 | Control | Harden MPC constructor finite-value validation for model and target tensors | `scpn-fusion-rs/crates/fusion-control/src/mpc.rs` | MPC constructor now rejects non-finite values in `b_matrix` and `target` via explicit `FusionError::ConfigError`, preventing NaN/Inf propagation into optimization rollouts while preserving deterministic behavior for finite inputs | `cargo test -p fusion-control mpc::tests::test_mpc_constructor_rejects_non_finite_matrix_or_target_values -- --nocapture`, `cargo test -p fusion-control mpc::tests::test_mpc_moves_toward_target -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-020 | P1 | Control | Harden MPC runtime vector finite-value validation for delay-aware execution paths | `scpn-fusion-rs/crates/fusion-control/src/mpc.rs` | MPC runtime paths now reject non-finite values in state/action/bias/noise/delayed-action vectors via explicit `FusionError::ConfigError`, preventing NaN/Inf telemetry from silently propagating through surrogate rollout and delayed dynamics | `cargo test -p fusion-control mpc::tests::test_surrogate_predict_rejects_non_finite_state_or_action_values -- --nocapture`, `cargo test -p fusion-control mpc::tests::test_mpc_delay_paths_reject_non_finite_vectors -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-021 | P1 | Control | Harden PID and IsoFlux controllers with strict finite input validation | `scpn-fusion-rs/crates/fusion-control/src/pid.rs` | PID/IsoFlux constructors and runtime steps now reject non-finite gains, targets, and measurement/error inputs via explicit `FusionError::ConfigError`, preventing NaN/Inf propagation through control history while preserving deterministic control outputs for valid inputs | `cargo test -p fusion-control pid::tests::test_pid_rejects_non_finite_gains_and_error -- --nocapture`, `cargo test -p fusion-control pid::tests::test_isoflux_rejects_non_finite_targets_and_measurements -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-022 | P1 | Control | Harden SNN controller finite/range input validation for constructor and runtime paths | `scpn-fusion-rs/crates/fusion-control/src/snn.rs` | SNN neuron, pool, and neuro-cybernetic controller paths now reject invalid constructor/runtime inputs (`n_neurons`, `window_size`, `gain`, `target`, `error`, `current`, `dt`, measured positions) via explicit `FusionError::ConfigError`, preventing NaN/Inf and zero-step propagation through spiking control state | `cargo test -p fusion-control snn::tests::test_snn_rejects_invalid_constructor_and_step_inputs -- --nocapture`, `cargo test -p fusion-control snn::tests::test_neuro_cybernetic_controller_rejects_non_finite_inputs -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-023 | P1 | Control | Harden optimal-control SVD and response-matrix builders with strict input/conditioning validation | `scpn-fusion-rs/crates/fusion-control/src/optimal.rs` | Optimal-control solvers now reject invalid dimensions/non-finite values and near-singular 2×N systems via explicit `FusionError::ConfigError` instead of panicking or silently returning zero corrections, and response-matrix construction now validates perturbation/base/evaluate outputs for finite, well-formed values | `cargo test -p fusion-control optimal::tests::test_svd_correction_rejects_invalid_inputs_and_singular_system -- --nocapture`, `cargo test -p fusion-control optimal::tests::test_build_response_matrix_rejects_invalid_inputs -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-024 | P1 | Control | Harden SPI mitigation constructor/runtime guards with strict finite-positive validation | `scpn-fusion-rs/crates/fusion-control/src/spi.rs` | SPI mitigation now rejects invalid constructor/runtime inputs (`w_th_mj`, `ip_ma`, `te_kev`, runtime `w_th/ip/te`) via explicit `FusionError::ConfigError`, preventing NaN/Inf/non-physical state propagation through disruption phase transitions | `cargo test -p fusion-control spi::tests::test_spi_rejects_invalid_constructor_and_runtime_inputs -- --nocapture`, `cargo test -p fusion-control spi::tests::test_spi_phases_sequential -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-025 | P1 | Control | Harden analytic Shafranov and coil-solve APIs with strict finite/conditioning validation | `scpn-fusion-rs/crates/fusion-control/src/analytic.rs`, `scpn-fusion-rs/crates/fusion-python/src/lib.rs` | Analytic control APIs now reject invalid geometry/current/Green-function inputs and near-zero-norm solve configurations via explicit `FusionError::ConfigError` (surfaced as `PyValueError` in Python bindings), replacing prior silent zero-current fallback and unchecked non-finite propagation | `cargo test -p fusion-control analytic::tests::test_analytic_rejects_invalid_inputs -- --nocapture`, `cargo test -p fusion-control analytic::tests::test_coil_currents_solve -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-026 | P1 | Control | Harden SOC learning loop with strict finite/range/index validation | `scpn-fusion-rs/crates/fusion-control/src/soc_learning.rs` | SOC sandpile/agent paths now reject invalid runtime inputs and indices (`ext_shear`, turbulence/flow/reward, state/action bounds, `n_steps`) via explicit `FusionError::ConfigError`, preventing NaN/Inf/index propagation through Q-learning and avalanche-control coupling | `cargo test -p fusion-control soc_learning::tests::test_soc_rejects_invalid_inputs -- --nocapture`, `cargo test -p fusion-control soc_learning::tests::test_q_learning_runs -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-027 | P1 | Physics | Harden ignition-rate and thermodynamics APIs with strict finite/domain validation | `scpn-fusion-rs/crates/fusion-core/src/ignition.rs`, `scpn-fusion-rs/crates/fusion-python/src/lib.rs` | Ignition Bosch-Hale and thermodynamics paths now reject invalid/non-physical inputs (`t_kev`, `p_aux_mw`, flux normalization denominator) via explicit `FusionError::ConfigError` (surfaced as `PyValueError` in Python bindings), replacing prior silent temperature/denominator coercions | `cargo test -p fusion-core ignition::tests::test_ignition_rejects_invalid_inputs -- --nocapture`, `cargo test -p fusion-core ignition::tests::test_thermodynamics_after_solve -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-028 | P1 | Operations | Harden actuator delay-line runtime command validation in digital twin control path | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs` | Actuator delay-line execution now rejects malformed command vectors (length mismatch/non-finite values) via explicit `FusionError::ConfigError` instead of silently replaying stale outputs, with deterministic guard coverage for invalid push inputs | `cargo test -p fusion-control digital_twin::tests::test_actuator_delay_line_rejects_invalid_push_inputs -- --nocapture`, `cargo test -p fusion-control digital_twin::tests::test_actuator_delay_line_enforces_delay -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-029 | P1 | Operations | Harden digital-twin bit-flip fault injection with strict input/index validation | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs` | Bit-flip fault injection now rejects invalid/non-finite source values and out-of-range bit indices (`bit_index >= 64`) via explicit `FusionError::ConfigError`, replacing prior silent modulo index wrapping and finite-fallback behavior | `cargo test -p fusion-control digital_twin::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-030 | P1 | Operations | Harden chaos-monkey runtime path with strict config/channel validation | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs` | Chaos-monkey injection now validates runtime config fields and channel values (`dropout_prob`, `gaussian_noise_std`, channel finiteness) and returns explicit `FusionError::ConfigError` instead of relying on panic-prone `expect` behavior for invalid Gaussian setup | `cargo test -p fusion-control digital_twin::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-031 | P1 | Operations | Harden digital-twin SimpleMLP constructor and runtime input validation | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs` | SimpleMLP paths now reject invalid constructor/runtime inputs (`input_dim == 0`, input length mismatch, non-finite input/advantage) and guard against non-finite parameter updates via explicit `FusionError::ConfigError`, preventing shape/NaN propagation in training and inference | `cargo test -p fusion-control digital_twin::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-032 | P1 | Operations | Harden Plasma2D runtime step/measurement paths with strict finite-value validation | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs` | Plasma2D runtime methods now reject non-finite action/process/measurement inputs and return explicit `FusionError::ConfigError` on non-finite outputs, preventing NaN/Inf propagation through thermal step and sensor readout paths | `cargo test -p fusion-control digital_twin::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-033 | P1 | Operations | Harden OU noise runtime stepping with strict field/state validation | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs` | Scalar/vector OU noise runtime steps now validate mutable runtime fields (`theta`, `sigma`, `dt`, `state`) and return explicit `FusionError::ConfigError` on invalid or non-finite evolution, preventing silent NaN/Inf propagation after post-construction mutation | `cargo test -p fusion-control digital_twin::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-034 | P1 | Runtime | Harden JIT kernel runtime execution with strict active-kernel and vector validation | `scpn-fusion-rs/crates/fusion-core/src/jit.rs` | JIT runtime execution now rejects missing active kernels, state/control length mismatches, and non-finite runtime vectors via explicit `FusionError::ConfigError`, replacing prior silent identity/fallback behavior in step paths | `cargo test -p fusion-core jit::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-035 | P1 | Tooling | Restore Rust stable CI lane by applying canonical rustfmt across recent hardening edits | `scpn-fusion-rs/crates/fusion-control/src/digital_twin.rs`, `scpn-fusion-rs/crates/fusion-core/src/jit.rs` | Applied workspace `cargo fmt` normalization to clear `cargo fmt --all -- --check` gate failures observed on CI Rust(stable) runs while preserving runtime hardening logic; verified full Rust(stable) lane locally (`clippy` + `cargo test --all-features`) | `cargo fmt --all -- --check`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo test --all-features` |
| H8-036 | P1 | Runtime | Harden equilibrium probe-sampling APIs with strict coordinate/axis validation | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs`, `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Kernel probe sampling now rejects non-finite probe coordinates and non-finite axis/sample states via explicit `FusionError::ConfigError` (propagated through inverse forward/jacobian paths) instead of silently snapping invalid values to index 0 through nearest-neighbor fallback | `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_non_finite_probe_coordinates -- --nocapture`, `cargo test -p fusion-core inverse::tests::test_kernel_inverse_api_input_validation -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-037 | P1 | Runtime | Harden AMR solver entrypoints with strict source-shape/value validation | `scpn-fusion-rs/crates/fusion-core/src/amr_kernel.rs` | AMR solve entrypoints now reject malformed source grids (shape mismatch/non-finite values) and non-finite coarse/patch/blended outputs via explicit `FusionError::ConfigError`, replacing panic-prone indexing assumptions in hierarchy solve paths | `cargo test -p fusion-core amr_kernel::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-038 | P1 | Runtime | Harden stability/force-balance APIs with strict finite/domain validation | `scpn-fusion-rs/crates/fusion-core/src/stability.rs` | Stability routines now reject invalid runtime inputs (non-finite/invalid `r`, `z`, current, psi shape, empty control-coil set, near-zero `Bz`) and propagate explicit `FusionError::ConfigError` instead of silent `0.0` decay-index fallback and unchecked non-finite force propagation | `cargo test -p fusion-core stability::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-039 | P1 | Runtime | Harden RF-heating resonance and ray-trace entrypoints with strict runtime validation | `scpn-fusion-rs/crates/fusion-core/src/rf_heating.rs` | RF heating entrypoints now validate mutable runtime fields/inputs (`omega`, `b0`, `r0`, ray initial conditions, `n_steps`) and reject non-finite RHS/state/timestep evolution via explicit `FusionError::ConfigError` instead of silent early exits on invalid ray states | `cargo test -p fusion-core rf_heating::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-040 | P1 | Runtime | Harden vacuum-field kernel with strict grid/coil/physics validation | `scpn-fusion-rs/crates/fusion-core/src/vacuum.rs`, `scpn-fusion-rs/crates/fusion-core/src/kernel.rs`, `scpn-fusion-rs/crates/fusion-core/src/stability.rs` | Vacuum-field generation now rejects invalid runtime inputs (`mu0`, grid-shape/finite checks, coil radius/current finiteness, denominator/k²/elliptic/value finiteness) via explicit `FusionError::ConfigError`, and kernel/stability paths now propagate these failures explicitly instead of accepting silent non-finite propagation | `cargo test -p fusion-core vacuum::tests:: -- --nocapture`, `cargo test -p fusion-core stability::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-041 | P1 | Runtime | Harden B-field and X-point kernels with strict grid/shape/domain validation | `scpn-fusion-rs/crates/fusion-core/src/bfield.rs`, `scpn-fusion-rs/crates/fusion-core/src/xpoint.rs`, `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | B-field and X-point entrypoints now reject invalid runtime inputs (grid/psi shape mismatches, non-finite values, non-positive radius samples, empty divertor search region, non-finite `z_min`) via explicit `FusionError::ConfigError`, and equilibrium solve now propagates these failures explicitly instead of silently falling back to min-psi X-point selection | `cargo test -p fusion-core bfield::tests:: -- --nocapture`, `cargo test -p fusion-core xpoint::tests:: -- --nocapture`, `cargo test -p fusion-core kernel::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-042 | P1 | Runtime | Harden memory-kernel transport constructor and step runtime validation | `scpn-fusion-rs/crates/fusion-core/src/memory_transport.rs` | Memory-kernel transport now rejects invalid runtime inputs (non-finite/negative `tau_d`, non-finite drive vectors, invalid `dt`/`p_aux_mw`, non-finite gradient/divergence/source evolution) via explicit `FusionError::ConfigError` instead of silently clamping/falling back on non-finite updates during temperature/memory evolution | `cargo test -p fusion-core memory_transport::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-043 | P1 | Runtime | Harden nonlinear plasma-source kernel entrypoints with strict input/profile validation | `scpn-fusion-rs/crates/fusion-core/src/source.rs`, `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | Plasma-source update entrypoints now reject invalid runtime inputs (psi/grid shape mismatches, non-finite values, degenerate flux denominator, non-positive in-plasma radius, invalid `mu0`, malformed profile parameters) via explicit `FusionError::ConfigError`, and equilibrium solve now propagates source update failures explicitly through `FusionResult` instead of silent denominator/radius coercions | `cargo test -p fusion-core source::tests:: -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_validated_config_equilibrium -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-044 | P1 | Runtime | Harden radial transport runtime evolution paths with strict finite/domain validation | `scpn-fusion-rs/crates/fusion-core/src/transport.rs` | Radial transport runtime entrypoints now reject invalid runtime inputs (non-finite/negative `p_aux_mw` and `erosion_rate`, invalid `dt`, non-positive interior `rho`, non-finite gradient/divergence/source terms) via explicit `FusionError::ConfigError`, and step/update/evolve/injection paths now propagate failures through `FusionResult` instead of silent coercion fallbacks in runtime evolution | `cargo test -p fusion-core transport::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-045 | P1 | Runtime | Harden MPI decomposition/halo utilities with strict finite-data and metadata guards | `scpn-fusion-rs/crates/fusion-core/src/mpi_domain.rs` | MPI decomposition and halo/stitch/delta utilities now reject invalid runtime inputs (non-finite local/global array values, invalid slice bounds/metadata, malformed halo buffers, non-finite L2 inputs/outputs) via explicit `FusionError::PhysicsViolation` instead of silently propagating invalid values through exchange/stitch operations | `cargo test -p fusion-core mpi_domain::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-046 | P1 | Runtime | Harden VMEC interface import/export validation for modes and key semantics | `scpn-fusion-rs/crates/fusion-core/src/vmec_interface.rs` | VMEC interface paths now reject malformed runtime payloads (non-finite scalar/mode coefficients, invalid negative `m`, duplicate scalar keys, non-finite parsed float fields) via explicit `FusionError::PhysicsViolation` instead of silently accepting duplicate-key overrides or NaN/Inf coefficients in boundary states | `cargo test -p fusion-core vmec_interface::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-047 | P1 | Runtime | Harden Jacobian/forward-model APIs with strict probe and profile-parameter validation | `scpn-fusion-rs/crates/fusion-core/src/jacobian.rs`, `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Jacobian and forward-model paths now reject invalid runtime inputs (empty/out-of-range/non-finite probe vectors, malformed profile parameters, and non-finite Jacobian/response outputs) via explicit `FusionError::ConfigError`, and inverse reconstruction now propagates these failures through `FusionResult` instead of accepting silently sanitized profile parameter combinations | `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-048 | P1 | Runtime | Remove silent inverse-profile sanitization and enforce strict parameter validation | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Inverse reconstruction now rejects invalid initial profile parameters explicitly, removes silent `abs/max` coercion from profile unpack/derivative paths, and treats invalid line-search trial parameters as rejected updates (not auto-sanitized), with regression coverage for both analytic and kernel inverse entrypoints | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-049 | P1 | Runtime | Harden kernel-inverse analytical runtime scalars and radius handling with explicit errors | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Kernel analytical inverse path now rejects invalid runtime scalars (`mu0`, `i_target`, `psi_boundary-psi_axis`, `psi_norm`, `i_raw`, scale factor) and non-physical/non-finite in-plasma radii via explicit `FusionError::ConfigError` instead of silently coercing flux denominator/radius or returning zero-Jacobian fallback under degenerate current integrals | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-050 | P1 | Runtime | Harden inverse API boundaries for finite probe/measurement validation | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Inverse entrypoints now reject non-finite measurement vectors and malformed probe inputs (non-finite `probes_rz` coordinates or normalized probe samples outside `[0,1]`) before solver iterations, and kernel forward paths apply the same probe-coordinate guards to prevent late-stage NaN/Inf propagation | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-051 | P1 | Runtime | Harden inverse LM update-vector validation in analytic and kernel reconstruction loops | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Both inverse reconstruction paths now enforce explicit LM update-vector guards (expected parameter dimension and finite values) before line-search application, surfacing `FusionError::LinAlg` instead of allowing malformed/non-finite update vectors to propagate into trial parameter updates | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings` |
| H8-052 | P1 | Tooling | Restore Rust(stable) CI lane by applying canonical rustfmt after inverse hardening edits | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Applied workspace `cargo fmt` normalization to clear Rust(stable) `cargo fmt --all -- --check` gate failures introduced by recent inverse-runtime hardening patches; revalidated with inverse/jacobian tests, clippy, and fmt-check | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-053 | P1 | Runtime | Harden inverse kernel observable/Jacobian boundaries with explicit shape-finite guards | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Kernel inverse paths now validate observable vector lengths/finiteness, Jacobian matrix shape/finiteness, and residual scalar finiteness at analytic/FD and LM-loop boundaries, rejecting malformed or non-finite intermediates via explicit `FusionError` instead of allowing silent propagation into updates | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-054 | P1 | Runtime | Harden inverse linearized-sensitivity solver with strict grid/source/value validation | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Converted internal linearized sensitivity solve path to explicit `FusionResult` validation with strict checks for grid size/spacing, source-shape consistency, and finite RHS/update/solution states, replacing silent zero-field fallback behavior on invalid inputs | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-055 | P1 | Runtime | Harden inverse Jacobian matrix-to-array conversion with explicit shape/finite guards | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Jacobian conversion now rejects empty, jagged, or non-finite matrices via explicit `FusionError::ConfigError` before ndarray projection, replacing prior panic-prone row indexing assumptions in analytic/kernel LM solve paths | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-056 | P1 | Runtime | Centralize inverse RMSE computation with strict vector-length and finite-value validation | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Replaced duplicated residual math with a validated RMSE helper that enforces non-empty equal-length finite prediction/measurement vectors and rejects non-finite RMSE outputs, tightening both analytic and kernel LM residual/trial/final evaluation paths | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-057 | P1 | Runtime | Enforce kernel inverse probe-domain bounds to prevent silent edge snapping | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Kernel inverse forward/analytical paths now validate probe coordinates against solved grid bounds and reject out-of-domain probes via explicit `FusionError::ConfigError`, preventing nearest-neighbor edge fallback from masking invalid diagnostic geometry | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-058 | P1 | Runtime | Centralize LM update construction with strict Jacobian/residual/regularization validation | `scpn-fusion-rs/crates/fusion-core/src/inverse.rs` | Added shared `compute_lm_delta` helper for analytic and kernel inverse loops to enforce Jacobian/residual shape and finiteness, positive finite Tikhonov regularization, finite augmented system/pseudo-inverse/update vectors, and validated clamped update dimensions before line search | `cargo test -p fusion-core inverse::tests:: -- --nocapture`, `cargo test -p fusion-core jacobian::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-059 | P1 | Runtime | Harden particle summary/deposition paths with strict particle-grid finite validation | `scpn-fusion-rs/crates/fusion-core/src/particles.rs`, `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | Particle runtime paths now enforce explicit charged-particle and projection-grid validation (finite state, positive mass/weight, finite grid axes/spacing/mesh shapes), replace NaN-tolerant energy-sort fallback with validated ordering, and propagate deposition failures through kernel population-feedback setup instead of silent fallback behavior | `cargo test -p fusion-core particles::tests:: -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_builds_summary -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_invalid_threshold -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-060 | P1 | Runtime | Remove silent Boris no-op by enforcing explicit particle-step runtime validation | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | Boris particle-step APIs now return `FusionResult` and reject invalid runtime inputs (non-finite E/B vectors, invalid `dt_s`, invalid particle state, non-finite velocity/position updates) instead of silently returning on invalid mass/timestep; batch advance now reports indexed particle failures with regression tests | `cargo test -p fusion-core particles::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-061 | P1 | Runtime | Harden particle-current blending by rejecting non-finite maps and zero-integral renormalization traps | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | Particle/fluid current blending now enforces finite input maps and integral/scale validity, and returns explicit `FusionError::PhysicsViolation` when `i_target` is non-zero but blended current integral is effectively zero instead of silently zero-filling; added regression tests for non-finite maps and zero-integral/non-zero-target cases | `cargo test -p fusion-core particles::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-062 | P1 | Runtime | Harden external particle-feedback map ingestion with strict finite-value guard | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_current_feedback` now rejects non-finite external current maps via explicit `FusionError::PhysicsViolation` before storing feedback state, preventing NaN/Inf maps from entering subsequent equilibrium iterations; added targeted regression coverage | `cargo test -p fusion-core kernel::tests::test_particle_feedback_shape_guard -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_invalid_coupling -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_non_finite_map -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_builds_summary -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_invalid_threshold -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-063 | P1 | Runtime | Harden alpha seed generation against non-finite kinematic overflow states | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | Alpha seed generation now explicitly validates derived kinetic quantities (`energy_j`, `speed`, decomposed velocity components) for finite positive values and fails fast with `FusionError::PhysicsViolation` on overflow-driven non-finite states instead of propagating invalid particle seeds downstream | `cargo test -p fusion-core particles::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-064 | P1 | Runtime | Support descending-grid particle projection bounds without silent in-domain rejection | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | Particle heating/deposition bounds now derive axis limits via endpoint min/max and accept finite non-zero signed spacings, preserving correct in-domain projection on descending `R/Z` grids; added regression tests for descending-axis heating and toroidal current deposition paths | `cargo test -p fusion-core particles::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-065 | P1 | Runtime | Enforce projection-grid metadata validation in particle-current blending path | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | `blend_particle_current` now validates projection grid metadata (axis lengths/mesh shape/finiteness/non-zero spacing) before renormalization, closing a path where malformed grid descriptors could silently distort current scaling; added regression test for invalid grid spacing | `cargo test -p fusion-core particles::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-066 | P1 | Runtime | Enforce kernel probe-domain bounds in public sampler APIs to prevent edge snapping | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | Kernel probe sampling now rejects out-of-domain `(R,Z)` queries using explicit axis-bound checks (descending-axis safe) before nearest-index lookup, eliminating silent edge snapping for public `sample_psi_at`/`sample_psi_at_probes`; added regression test coverage for out-of-domain probes | `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_non_finite_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_out_of_domain_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_shape_guard -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_non_finite_map -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-067 | P1 | Runtime | Guard kernel probe sampling against psi/grid shape mismatch before indexing | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | Public sampler now validates that solved `psi` shape matches configured grid dimensions before probe indexing, returning explicit `FusionError::ConfigError` instead of allowing panic-prone out-of-bounds access under corrupted or externally-mutated state | `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_non_finite_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_out_of_domain_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_state_shape_mismatch -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-068 | P1 | Runtime | Enforce non-empty probe batches for kernel multi-sample API | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `sample_psi_at_probes` now rejects empty probe arrays with explicit `FusionError::ConfigError` instead of silently returning empty output, tightening call-contract validation for diagnostics and inverse pre-processing paths | `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_non_finite_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_out_of_domain_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_empty_probe_list -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_state_shape_mismatch -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-069 | P1 | Runtime | Harden projection-grid validation with finite mesh-coordinate enforcement | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | Particle projection-grid validation now rejects non-finite `rr/zz` mesh coordinates in addition to shape/axis/spacing guards, preventing corrupted mesh metadata from silently passing into blending/heating/deposition paths; added regression coverage for non-finite grid mesh in blend path | `cargo test -p fusion-core particles::tests:: -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-070 | P1 | Runtime | Reject empty particle populations in kernel feedback synthesis | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_feedback_from_population` now rejects empty particle arrays with explicit `FusionError::PhysicsViolation`, preventing invalid no-particle feedback synthesis from silently proceeding into deposition/coupling paths; added targeted regression coverage for empty populations | `cargo test -p fusion-core kernel::tests::test_particle_feedback_shape_guard -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_non_finite_map -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_builds_summary -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_invalid_threshold -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_empty_population -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-071 | P1 | Runtime | Add strict solver runtime-control validation before equilibrium iteration | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `solve_equilibrium` now rejects invalid runtime controls (`physics.vacuum_permeability`, `physics.plasma_current_target`, `solver.max_iterations`, `solver.convergence_threshold`, grid dimensions, and grid spacing) with explicit configuration/physics errors before entering Picard/Jacobi loops; added regression coverage for invalid max-iterations, convergence threshold, and grid spacing controls | `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_invalid_runtime_controls -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_empty_population -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-072 | P1 | Runtime | Preserve external-profile state across temporary profile solve wrappers | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `solve_equilibrium_with_profiles` now restores the prior external-profile mode and parameter set after each call (including failure paths), preventing temporary inverse/diagnostic profile solves from mutating subsequent kernel runtime behavior; added regression coverage for restoration with and without pre-existing profile mode | `cargo test -p fusion-core kernel::tests::test_solve_with_profiles_restores_profile_state_on_error -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_with_profiles_restores_previous_external_profile_state -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_invalid_runtime_controls -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-073 | P1 | Runtime | Harden Boris batch-advance entrypoint against empty-slice and zero-step no-op calls | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | `advance_particles_boris` now rejects empty particle slices and `steps=0` with explicit `FusionError::PhysicsViolation` instead of silently returning success on invalid no-op runtimes; added targeted regression coverage for both invalid entrypoint modes while preserving nominal Boris integration behavior | `cargo test -p fusion-core particles::tests::test_advance_particles_boris_rejects_empty_slice_and_zero_steps -- --nocapture`, `cargo test -p fusion-core particles::tests::test_advance_particles_boris_rejects_invalid_particle_state -- --nocapture`, `cargo test -p fusion-core particles::tests::test_boris_push_preserves_speed_without_electric_field -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-074 | P1 | Runtime | Reject empty particle populations in toroidal current deposition | `scpn-fusion-rs/crates/fusion-core/src/particles.rs` | `deposit_toroidal_current_density` now rejects empty particle populations with explicit `FusionError::PhysicsViolation` instead of silently returning zero-current maps, strengthening invalid-call detection for feedback synthesis and diagnostics staging paths; added regression coverage for empty-population deposition while preserving valid deposition behavior | `cargo test -p fusion-core particles::tests::test_toroidal_current_deposition_rejects_empty_population -- --nocapture`, `cargo test -p fusion-core particles::tests::test_toroidal_current_deposition_rejects_invalid_particle_state -- --nocapture`, `cargo test -p fusion-core particles::tests::test_toroidal_current_deposition_is_nonzero -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_empty_population -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-075 | P1 | Runtime | Add per-probe index context to multi-probe psi sampling errors | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `sample_psi_at_probes` now wraps underlying sampler `ConfigError` values with `probe[i]` context, making invalid diagnostics probe batches directly traceable without binary-searching coordinates; added regression coverage for indexed out-of-domain failure messages | `cargo test -p fusion-core kernel::tests::test_sample_psi_probe_errors_include_probe_index -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_out_of_domain_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_empty_probe_list -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-076 | P1 | Runtime | Fail fast on zero-integral full-coupling particle-feedback maps | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_current_feedback` now validates deposited particle-current integral and rejects near-zero-integral maps when `coupling=1` and target plasma current is non-zero, preventing delayed blend-time failures and surfacing invalid feedback inputs at configuration time; added regression coverage for full-coupling rejection and partial-coupling acceptance | `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_zero_integral_with_full_coupling -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_builds_summary -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-077 | P1 | Runtime | Propagate population-context diagnostics for particle-feedback setup failures | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_feedback_from_population` now wraps downstream feedback-setup `PhysicsViolation` errors with population-context diagnostics, and rejects out-of-domain full-coupling populations with explicit setup-failure messaging, improving root-cause visibility for invalid particle overlays | `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_out_of_domain_full_coupling -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_zero_integral_with_full_coupling -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_builds_summary -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_empty_population -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-078 | P1 | Runtime | Reject invalid kernel grid spacing during particle-feedback setup | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_current_feedback` now enforces finite non-zero kernel grid spacing before accepting feedback maps, preventing delayed runtime failures when mutated/invalid grid metadata reaches blending; added regression coverage for invalid spacing rejection while preserving nominal feedback setup behavior | `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_invalid_grid_spacing -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_zero_integral_with_full_coupling -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_builds_summary -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-079 | P1 | Runtime | Require finite plasma current targets at particle-feedback configuration time | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_current_feedback` now rejects non-finite `physics.plasma_current_target` before accepting runtime feedback maps, preventing inconsistent kernel configuration from silently passing setup and failing later at solve-time; added regression coverage for non-finite target rejection alongside existing feedback guards | `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_non_finite_plasma_current_target -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_invalid_grid_spacing -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_zero_integral_with_full_coupling -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-080 | P1 | Runtime | Add explicit summary/deposition failure context in population-feedback setup | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_feedback_from_population` now wraps summary and deposition `PhysicsViolation` errors with explicit stage context (`summary failed` / `deposition failed`), improving fault localization for invalid thresholds and grid/particle projection failures; added targeted regressions for wrapped threshold and deposition error paths | `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_invalid_threshold -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_wraps_deposition_errors -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_out_of_domain_full_coupling -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_builds_summary -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-081 | P1 | Runtime | Preserve stage context for configuration errors in population-feedback pipeline | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_feedback_from_population` now wraps both `PhysicsViolation` and `ConfigError` outputs from summary/deposition/setup stages with explicit stage prefixes, ensuring setup-time configuration failures (e.g., non-finite target current) are immediately traceable to the failing pipeline step; added regression coverage for wrapped setup-stage `ConfigError` propagation | `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_rejects_invalid_threshold -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_wraps_deposition_errors -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_wraps_setup_config_errors -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_from_population_builds_summary -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-082 | P1 | Runtime | Validate external-profile mode contracts before entering equilibrium iteration | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `solve_equilibrium` now pre-validates external profile mode requirements (both parameter sets present and numerically valid) before vacuum/iteration work, preventing silent fallback behavior when profile mode is enabled without params and surfacing invalid profile knobs at solver entry; added regression coverage for missing params and invalid profile values while preserving existing temporary-profile state restoration behavior | `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_external_profile_mode_without_params -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_invalid_external_profile_params -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_with_profiles_restores_profile_state_on_error -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_with_profiles_restores_previous_external_profile_state -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-083 | P1 | Runtime | Validate profile params before temporary profile-solve state mutation | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `solve_equilibrium_with_profiles` now validates incoming profile params before toggling external-profile state, preventing invalid temporary profiles from mutating prior kernel configuration; added regression coverage that invalid params fail fast and preserve existing profile-mode state | `cargo test -p fusion-core kernel::tests::test_solve_with_profiles_rejects_invalid_params_without_state_mutation -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_with_profiles_restores_profile_state_on_error -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_with_profiles_restores_previous_external_profile_state -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_invalid_external_profile_params -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-084 | P1 | Runtime | Harden axis-domain bounds against interior non-finite coordinates | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | Probe-domain bounds now scan full axis vectors (not just endpoints), reject non-finite interior coordinates explicitly, and compute true min/max bounds for robust sampling-domain checks under non-monotonic/edited axes; added regression coverage for non-finite axis coordinates while preserving existing probe-domain guards | `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_non_finite_axis_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_non_finite_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_out_of_domain_probe_coordinates -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-085 | P1 | Runtime | Reject malformed zero-sized grid dimensions in feedback setup path | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_current_feedback` now rejects zero-sized grid dimensions before shape/coupling checks, preventing malformed runtime grid mutation from silently passing feedback setup; added regression coverage for empty-dimension rejection while preserving existing feedback guard behavior | `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_empty_grid_dimensions -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_invalid_grid_spacing -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-086 | P1 | Runtime | Require strictly positive grid spacing in solver and feedback setup | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `solve_equilibrium` and `set_particle_current_feedback` now reject non-positive (`<=0`) spacing so negative mutated grid metadata fails fast instead of being treated as valid non-zero geometry; added regression coverage for negative-`dz` rejection in both runtime-control and feedback setup paths | `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_invalid_grid_spacing -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_invalid_runtime_controls -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-087 | P1 | Runtime | Validate grid axis/mesh metadata consistency during feedback setup | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_current_feedback` now fails fast when grid axis lengths (`r/z`) or mesh shapes (`rr/zz`) diverge from `(nz,nr)` metadata, preventing corrupted runtime grid mutation from silently accepting feedback maps before later solver-stage faults; added regression coverage for axis-length and mesh-shape mismatch rejection | `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_grid_axis_length_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_grid_mesh_shape_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_invalid_grid_spacing -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-088 | P1 | Runtime | Preflight solver grid axis/mesh shape consistency before iteration loops | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `solve_equilibrium` now validates grid axis lengths and `rr/zz` mesh shapes against `(nz,nr)` metadata before any indexing, converting potential panic-prone corrupted-grid states into explicit `ConfigError` failures; added regression coverage for axis-length and mesh-shape mismatch rejection in the solver entry path | `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_grid_axis_length_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_grid_mesh_shape_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_invalid_runtime_controls -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_grid_axis_length_mismatch -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-089 | P1 | Runtime | Enforce finite grid axis/mesh coordinates at solver entry | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `solve_equilibrium` now rejects non-finite coordinates in `r/z` axes and `rr/zz` mesh tensors before Picard setup, surfacing mutated-grid corruption as explicit `ConfigError` rather than deferred numerical divergence; added regression coverage for non-finite axis and mesh coordinate rejection | `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_non_finite_grid_axes -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_non_finite_grid_mesh -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_grid_mesh_shape_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_invalid_runtime_controls -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-090 | P1 | Runtime | Require finite grid coordinates before accepting particle-feedback maps | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `set_particle_current_feedback` now rejects non-finite coordinates in `r/z` axes and `rr/zz` mesh tensors before enabling runtime feedback coupling, preventing corrupted grid state from being accepted at setup time; added regression coverage for non-finite axis and mesh rejection in feedback path | `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_non_finite_grid_axes -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_non_finite_grid_mesh -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_grid_mesh_shape_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_rejects_grid_axis_length_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-091 | P1 | Runtime | Guard solver preflight against `state.j_phi` shape corruption | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `solve_equilibrium` now validates `state.j_phi` shape against `(nz,nr)` before seed/source writes, converting mutated-state shape corruption from panic-prone indexing into explicit `ConfigError`; added regression coverage for mismatched `j_phi` state dimensions while preserving existing runtime-control guards | `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_state_j_phi_shape_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_non_finite_grid_mesh -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_solve_equilibrium_rejects_invalid_runtime_controls -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-092 | P1 | Runtime | Validate sampler grid-axis metadata consistency before nearest-index lookup | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | `sample_psi_at` now requires `r/z` axis lengths to match `(nr,nz)` metadata before domain/nearest-index operations, preventing out-of-bounds risk under mutated axis metadata; added regression coverage for axis-length mismatch alongside existing sampler guards | `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_grid_axis_length_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_state_shape_mismatch -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_sample_psi_rejects_out_of_domain_probe_coordinates -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_particle_feedback_set_and_clear -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-093 | P1 | Runtime | Add explicit regression coverage for solver-mode switching and multigrid solve path | `scpn-fusion-rs/crates/fusion-core/src/kernel.rs` | Added unit coverage for default/explicit `solver_method` transitions (`PicardSor` ↔ `PicardMultigrid`) and a validated-config multigrid solve smoke test to keep PyO3-exposed backend selection and multigrid integration under CI guardrails | `cargo test -p fusion-core kernel::tests::test_solver_method_default_and_setter -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_multigrid_solver_mode_smoke -- --nocapture`, `cargo test -p fusion-core kernel::tests::test_full_equilibrium_iter_config -- --nocapture`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo fmt --all -- --check` |
| H8-094 | P1 | Runtime | Add Python bridge regression tests for solver-method aliasing and invalid input handling | `tests/test_rust_compat_solver_method.py` | Added guarded (`scpn_fusion_rs`-available) pytest coverage to verify `PyFusionKernel.set_solver_method` alias round-trips (`sor`/`picard_sor` and `multigrid`/`picard_multigrid`/`mg`) and to assert unknown solver methods raise `ValueError`, keeping the PyO3-facing control surface contract under test | `python -m pytest tests/test_rust_compat_solver_method.py -q` |
| H8-095 | P1 | Runtime | Add backend-agnostic wrapper tests for solver-method forwarding in `_rust_compat` | `tests/test_rust_compat_wrapper.py` | Added monkeypatched wrapper-level tests that validate `RustAcceleratedKernel.set_solver_method` forwarding and error propagation without requiring a compiled Rust extension, ensuring alias-path behavior remains covered in pure-Python CI environments | `python -m pytest tests/test_rust_compat_wrapper.py -q`, `python -m pytest tests/test_rust_compat_solver_method.py -q` |
| H8-096 | P1 | Runtime | Harden VMEC boundary import/export against ambiguous mode duplicates and unsupported format headers | `scpn-fusion-rs/crates/fusion-core/src/vmec_interface.rs` | VMEC boundary validation now rejects duplicate Fourier mode indices `(m,n)` and import enforces `format=vmec_like_v1` with duplicate-format rejection; added regression coverage for duplicate modes, malformed mode column counts, unsupported format versions, and duplicate format keys | `cargo test -p fusion-core vmec_interface::tests -- --nocapture`, `cargo fmt --all -- --check` |
| H8-097 | P1 | Interop | Tighten IDS validation contract for nested time-slice/equilibrium/performance fields | `src/scpn_fusion/io/imas_connector.py`, `tests/test_imas_connector.py` | `validate_ids_payload` now enforces nested mapping/value contracts (`time_slice.index/time_s`, `equilibrium.axis.r_m/z_m`, `equilibrium.islands_px`, and performance scalars) so malformed IDS payloads fail at validation boundary; added dedicated regression suite for nested-schema/type violations and nominal roundtrip acceptance | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-098 | P1 | Diagnostics | Enforce strictly increasing diagnostic grid axes before nearest-index forward modeling | `src/scpn_fusion/diagnostics/forward.py`, `tests/test_forward_diagnostics_guards.py` | Forward diagnostics now reject non-monotonic or duplicate `r_grid`/`z_grid` coordinates before nearest-index line integration, preventing silent channel corruption from malformed axis metadata; added regression coverage for non-monotonic and duplicate axis inputs in interferometer guards | `python -m pytest tests/test_forward_diagnostics_guards.py tests/test_diagnostics.py -q` |
| H8-099 | P1 | Interop | Enforce millisecond-integral IDS times at validation boundary | `src/scpn_fusion/io/imas_connector.py`, `tests/test_imas_connector.py` | `validate_ids_payload` now rejects `time_slice.time_s` values that cannot map exactly to integer milliseconds, matching `ids_to_digital_twin_summary` conversion contract and preventing downstream late-fail payloads; added regression coverage for non-ms fractional time inputs | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-100 | P1 | Diagnostics | Add explicit chord-geometry shape guards for forward interferometer channels | `src/scpn_fusion/diagnostics/forward.py`, `tests/test_forward_diagnostics_guards.py` | Forward diagnostics now validate each chord is exactly two 2D points before integration, converting malformed chord-arity inputs into deterministic `ValueError` contracts instead of unpack/index exceptions; added regression coverage for malformed chord and point dimensionality inputs | `python -m pytest tests/test_forward_diagnostics_guards.py tests/test_diagnostics.py -q` |
| H8-101 | P1 | Diagnostics | Add optional strict chord-domain enforcement for forward-model interferometer channels | `src/scpn_fusion/diagnostics/forward.py`, `tests/test_forward_diagnostics_guards.py` | Added opt-in domain-bound enforcement (`enforce_domain_bounds` / `enforce_chord_domain_bounds`) so out-of-grid chord endpoints can be explicitly rejected when strict geometry validation is required, while preserving legacy clamp-based behavior by default; added regression coverage for strict rejection and default permissive mode | `python -m pytest tests/test_forward_diagnostics_guards.py tests/test_diagnostics.py -q` |
| H8-102 | P1 | Interop | Require explicit nested IDS keys and core digital-twin summary keys in adapter contract | `src/scpn_fusion/io/imas_connector.py`, `tests/test_imas_connector.py` | `validate_ids_payload` now enforces required nested IDS keys (`time_slice.index/time_s`, `equilibrium.axis/islands_px`, `equilibrium.axis.r_m/z_m`, and performance scalars), and `digital_twin_summary_to_ids` now requires a mapping with core summary fields (`steps`, `final_islands_px`, `final_reward`, `reward_mean_last_50`, `final_avg_temp`) while keeping axis fields optional for backward compatibility; added regression coverage for missing nested-key and summary-key rejection | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-103 | P1 | Interop | Preserve digital-twin IDS adapter compatibility while enforcing core summary-key contract | `src/scpn_fusion/io/imas_connector.py`, `tests/test_imas_connector.py` | Refined `digital_twin_summary_to_ids` summary-key enforcement to require only stable core fields and keep `final_axis_r/z` optional, restoring compatibility with `run_digital_twin` outputs while retaining explicit nested-key validation in IDS payload checks; added regression coverage for non-mapping summaries and missing core summary keys | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-104 | P1 | Validation | Honor vectorized SOR tolerance and fix NaN-safe worst-file aggregation in ψ RMSE summary | `validation/psi_pointwise_rmse.py`, `tests/test_psi_pointwise_rmse.py` | `manufactured_solve_vectorised` now validates solver controls (`omega`, `max_iter`, `tol`) and stops early when GS residual meets tolerance; `validate_all_sparc` now computes `worst_file` from finite RMSE entries with index-safe mapping, avoiding NaN-induced misattribution; added regression coverage for early-stop behavior, invalid controls, and NaN-safe worst-file selection | `python -m pytest tests/test_psi_pointwise_rmse.py -q` |
| H8-105 | P1 | Validation | Make ψ RMSE CLI output encoding-safe on Windows code pages | `validation/psi_pointwise_rmse.py`, `tests/test_psi_pointwise_rmse_cli.py` | Replaced non-ASCII glyphs in CLI `main()` output with ASCII-safe labels so strict `cp1250`/ASCII terminals no longer raise `UnicodeEncodeError`, and added CLI regression coverage with an ASCII-strict stdout sink to lock compatibility | `python -m pytest tests/test_psi_pointwise_rmse.py tests/test_psi_pointwise_rmse_cli.py -q`, `python validation/psi_pointwise_rmse.py` |
| H8-106 | P1 | Validation | Enforce strict ψ RMSE input-shape and finite-value contracts | `validation/psi_pointwise_rmse.py`, `tests/test_psi_pointwise_rmse.py` | `compute_psi_rmse` now rejects shape-mismatched solver fields and non-finite values in solver/reference ψ inputs with explicit `ValueError` contracts, preventing silent broadcasting or NaN/Inf contamination of aggregate RMSE metrics; added regression coverage for shape mismatch and non-finite solver values | `python -m pytest tests/test_psi_pointwise_rmse.py tests/test_psi_pointwise_rmse_cli.py -q` |
| H8-107 | P1 | Validation | Enforce GS operator grid-axis contracts before finite-difference evaluation | `validation/psi_pointwise_rmse.py`, `tests/test_psi_pointwise_rmse.py` | `gs_operator` now rejects malformed inputs (`psi` not 2D, undersized grids, axis-length mismatch, non-finite values, non-monotonic `R/Z` axes) via explicit `ValueError` contracts, preventing divide-by-zero and invalid-stencil propagation into residual/solver validation paths; added regression coverage for grid shape, monotonicity, and non-finite input rejection | `python -m pytest tests/test_psi_pointwise_rmse.py tests/test_psi_pointwise_rmse_cli.py -q` |
| H8-108 | P1 | Validation | Enforce GEQDSK payload contracts for GS source reconstruction | `validation/psi_pointwise_rmse.py`, `tests/test_psi_pointwise_rmse.py` | `compute_gs_source` now validates core GEQDSK payload integrity (positive `nw/nh`, finite axis flux scalars, `psirz` shape, `pprime/ffprime` lengths, finite profile/grid values, and strictly increasing `R/Z` axes) before interpolation, turning malformed-input numeric failures into explicit `ValueError` contracts; added regression coverage for profile-length mismatch, `psirz` shape mismatch, non-finite profiles, and non-monotonic axis rejection | `python -m pytest tests/test_psi_pointwise_rmse.py tests/test_psi_pointwise_rmse_cli.py -q` |
| H8-109 | P1 | Tooling | Resolve Rust stable CI regression from upstream physics merge (fmt + clippy strict) | `scpn-fusion-rs/crates/fusion-core/src/particles.rs`, `scpn-fusion-rs/crates/fusion-core/src/transport.rs`, `scpn-fusion-rs/crates/fusion-gpu/src/lib.rs` | Applied workspace `cargo fmt` normalization and fixed strict clippy regressions (`manual_range_contains` in collision tests and `manual_div_ceil` in GPU workgroup sizing), restoring `Rust (stable)` pipeline compatibility after upstream merge drift | `cargo fmt --all -- --check`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo test --all-features` |
| H8-110 | P1 | Validation | Harden DIII-D/JET validation runner contracts for GS operator and GEQDSK payload integrity | `validation/run_diiid_jet_validation.py`, `tests/test_diiid_jet_validation.py` | `gs_operator` now validates grid dimensionality, axis-length compatibility, finite inputs, and strict axis monotonicity; `validate_file` now enforces finite/consistent GEQDSK payloads (grid size, `psirz` shape, profile lengths, non-degenerate `simag/sibry`) before residual/RMSE metrics, converting malformed inputs into explicit `ValueError` contracts; added regression coverage for axis mismatch, monotonicity, non-finite values, profile mismatch, and degenerate flux range | `python -m pytest tests/test_diiid_jet_validation.py tests/test_psi_pointwise_rmse.py tests/test_psi_pointwise_rmse_cli.py -q` |
| H8-111 | P1 | Tooling | Resolve Rust stable CI regression after VMEC/MPI upstream drop (fmt + clippy strict) | `scpn-fusion-rs/crates/fusion-core/src/bout_interface.rs`, `scpn-fusion-rs/crates/fusion-core/src/mpi_domain.rs`, `scpn-fusion-rs/crates/fusion-core/src/vmec_interface.rs` | Applied workspace `cargo fmt` normalization and fixed strict clippy regressions introduced by upstream VMEC/MPI changes (`manual_is_multiple_of`, `needless_range_loop`, `too_many_arguments`, and numeric expression simplification in tests), restoring green `Rust (stable)` behavior without altering physics/control contracts | `cargo fmt --all -- --check`, `cargo clippy --all-targets --all-features -- -D warnings`, `cargo test --all-features` |
| H8-112 | P1 | Tooling | Gate GitHub Pages deployment behind explicit repo variable to avoid false-red docs runs | `.github/workflows/docs.yml` | Added deploy-job condition `vars.DEPLOY_GH_PAGES == 'true'` so docs build jobs still run on every `main` push while Pages publish executes only when explicitly enabled; this prevents deploy-stage failures on repos/environments without active Pages admin configuration | `rg -n "if:\\s*\\$\\{\\{ vars\\.DEPLOY_GH_PAGES == 'true' \\}\\}" .github/workflows/docs.yml`, `GitHub Actions Documentation workflow rerun on main` |
| H8-113 | P1 | Engineering | Harden CAD raytrace mesh/source contracts with strict index/finiteness/non-degeneracy guards | `src/scpn_fusion/engineering/cad_raytrace.py`, `tests/test_cad_raytrace.py` | CAD mesh loading and surface-loading estimation now reject malformed geometry and source inputs (empty meshes, out-of-bounds/negative face indices, non-finite vertices/source values, degenerate triangles, negative source strengths) via explicit `ValueError` contracts instead of silent coercion/NaN propagation; added dedicated CAD raytrace regression suite covering STL fallback and malformed-input rejection paths | `python -m pytest tests/test_cad_raytrace.py tests/test_blanket_neutronics.py -q` |
| H8-114 | P1 | Engineering | Add optional CAD triangle occlusion culling for line-of-sight ray loading | `src/scpn_fusion/engineering/cad_raytrace.py`, `tests/test_cad_raytrace.py` | Added optional segment-triangle occlusion culling (`occlusion_cull`) and strict `occlusion_epsilon` validation so CAD surface-load estimates can suppress shadowed faces in multi-surface geometries; added regression coverage proving blocked downstream faces are zeroed under occlusion while non-occluded mode preserves prior behavior | `python -m pytest tests/test_cad_raytrace.py tests/test_blanket_neutronics.py -q` |
| H8-115 | P1 | Engineering | Add binary STL fallback parser for CAD ingestion without optional trimesh backend | `src/scpn_fusion/engineering/cad_raytrace.py`, `tests/test_cad_raytrace.py` | CAD mesh loading now supports binary STL parsing in fallback mode (header/triangle decoding with truncation checks) when `trimesh` is unavailable, expanding out-of-the-box interoperability for common CAD-export STL assets; added regression tests for successful binary STL load and truncated-binary rejection | `python -m pytest tests/test_cad_raytrace.py tests/test_blanket_neutronics.py -q` |
| H8-116 | P1 | Performance | Add optional JAX-traceable reduced control-loop runtime with deterministic NumPy fallback | `src/scpn_fusion/control/jax_traceable_runtime.py`, `src/scpn_fusion/control/__init__.py`, `tests/test_jax_traceable_runtime.py` | Added `run_traceable_control_loop` with backend selection (`auto`/`numpy`/`jax`), strict runtime/spec guards, and JAX `lax.scan` + `jit` rollout path when JAX is available; preserves deterministic NumPy execution when JAX is absent, enabling a trace-friendly control-loop lane without mandatory new dependencies | `python -m pytest tests/test_jax_traceable_runtime.py tests/test_cad_raytrace.py tests/test_blanket_neutronics.py -q` |
| H8-117 | P1 | Performance | Extend traceable runtime with optional TorchScript backend and deterministic backend routing | `src/scpn_fusion/control/jax_traceable_runtime.py`, `tests/test_jax_traceable_runtime.py` | Added optional `torchscript` backend with scripted rollout path and runtime guards, updated `auto` backend routing (`jax` -> `torchscript` -> `numpy`) while preserving zero-dependency fallback behavior; added regression coverage for missing-torch error path, auto-fallback semantics, and TorchScript parity with NumPy | `python -m pytest tests/test_jax_traceable_runtime.py tests/test_cad_raytrace.py tests/test_blanket_neutronics.py -q` |
| H8-118 | P1 | Performance | Add batched traceable control-loop rollout API with JAX/TorchScript/Numpy backend parity | `src/scpn_fusion/control/jax_traceable_runtime.py`, `src/scpn_fusion/control/__init__.py`, `tests/test_jax_traceable_runtime.py` | Added `run_traceable_control_batch` for `(batch, steps)` command tensors with strict batch/initial-state validation and deterministic backend execution (`auto`/`numpy`/`jax`/`torchscript`), including JAX scan-based and TorchScript scripted batch kernels plus parity/fallback regression coverage | `python -m pytest tests/test_jax_traceable_runtime.py tests/test_cad_raytrace.py tests/test_blanket_neutronics.py -q` |
| H8-119 | P2 | Docs | Expose traceable runtime API in Sphinx control reference | `docs/sphinx/api/control.rst` | Added `scpn_fusion.control.jax_traceable_runtime` to generated control API docs so JAX/TorchScript/Numpy traceable rollout interfaces are visible in published documentation navigation alongside existing control modules | `python -m pytest tests/test_jax_traceable_runtime.py -q`, `Documentation workflow on main` |
| H8-120 | P1 | Performance | Add backend parity-report helpers and validation entrypoint for traceable runtime | `src/scpn_fusion/control/jax_traceable_runtime.py`, `src/scpn_fusion/control/__init__.py`, `tests/test_jax_traceable_runtime.py`, `validation/traceable_runtime_parity.py` | Added backend discovery/parity reporting (`available_traceable_backends`, `validate_traceable_backend_parity`) for single+batch runtime paths and introduced `validation/traceable_runtime_parity.py` CLI with strict mode plus JSON/Markdown outputs, enabling deterministic backend-equivalence checks on each host | `python -m pytest tests/test_jax_traceable_runtime.py -q`, `python validation/traceable_runtime_parity.py --strict --steps 24 --batch 4 --output-json artifacts/traceable_runtime_parity_h8120.json --output-md artifacts/traceable_runtime_parity_h8120.md` |
| H8-121 | P1 | Performance | Add backend-subset filtering and CLI plumbing for traceable parity validation | `src/scpn_fusion/control/jax_traceable_runtime.py`, `validation/traceable_runtime_parity.py`, `tests/test_jax_traceable_runtime.py`, `tests/test_traceable_runtime_parity_cli.py` | Added explicit backend-set resolution for parity checks (`numpy`/`jax`/`torchscript`) with strict unsupported/unavailable guards, exposed repeatable `--backend` filtering in parity CLI, and added regression coverage for subset behavior, error handling, and strict-mode CLI exit semantics | `python -m pytest tests/test_jax_traceable_runtime.py tests/test_traceable_runtime_parity_cli.py -q`, `python validation/traceable_runtime_parity.py --strict --steps 24 --batch 4 --backend numpy --output-json artifacts/traceable_runtime_parity_h8121.json --output-md artifacts/traceable_runtime_parity_h8121.md` |
| H8-122 | P1 | Interop | Extend IDS adapter with optional 1D profile payloads and deterministic state roundtrip helpers | `src/scpn_fusion/io/imas_connector.py`, `src/scpn_fusion/io/__init__.py`, `tests/test_imas_connector.py` | IDS validation now enforces optional `equilibrium.profiles_1d` contracts (`rho_norm`, `electron_temp_keV`, `electron_density_1e20_m3`) including monotonicity/range/length checks, and new helpers (`digital_twin_state_to_ids`, `ids_to_digital_twin_state`) provide deterministic profile-aware state interchange without breaking summary-only payload compatibility | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-123 | P1 | Diagnostics | Add Thomson-scattering voltage forward channel and RMSE integration lane | `src/scpn_fusion/diagnostics/forward.py`, `src/scpn_fusion/diagnostics/__init__.py`, `tests/test_diagnostics.py`, `tests/test_forward_diagnostics_guards.py`, `validation/rmse_dashboard.py`, `tests/test_rmse_dashboard.py` | Forward diagnostics now produce a deterministic Thomson-scattering voltage channel with strict point/field/scalar validation, `generate_forward_channels` exposes profile-aware Thomson inputs (with backward-compatible defaults), and RMSE dashboard reporting includes Thomson-channel error metrics | `python -m pytest tests/test_diagnostics.py tests/test_forward_diagnostics_guards.py tests/test_rmse_dashboard.py tests/test_run_diagnostics.py -q` |
| H8-124 | P1 | Interop | Add IDS sequence-history helpers with strict monotonic time/index and metadata consistency contracts | `src/scpn_fusion/io/imas_connector.py`, `src/scpn_fusion/io/__init__.py`, `tests/test_imas_connector.py` | Added sequence-level interop API (`validate_ids_payload_sequence`, `digital_twin_history_to_ids`, `ids_to_digital_twin_history`) enforcing same machine/shot/run across snapshots plus strictly increasing `time_slice.index` and `time_slice.time_s`; history export now normalizes duplicate/flat snapshot times onto a deterministic increasing millisecond grid while preserving single-payload adapter compatibility | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-125 | P1 | Control/Interop | Add deterministic digital-twin IDS history export helper using sequence adapter contracts | `src/scpn_fusion/control/tokamak_digital_twin.py`, `tests/test_tokamak_digital_twin.py` | Added `run_digital_twin_ids_history(...)` to generate multi-horizon IDS payload sequences from digital-twin runs, with strict `history_steps`/seed ownership guards and deterministic replay semantics; regression tests cover valid sequence shape/index/time behavior, deterministic replay, and invalid-history input rejection | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-126 | P1 | Interop | Add pulse-style IDS history container helpers with strict metadata/slice consistency validation | `src/scpn_fusion/io/imas_connector.py`, `src/scpn_fusion/io/__init__.py`, `tests/test_imas_connector.py` | Added pulse-container API (`validate_ids_pulse_payload`, `digital_twin_history_to_ids_pulse`, `ids_pulse_to_digital_twin_history`) using schema `ids_equilibrium_pulse_v1`; validation enforces required pulse keys, non-empty `time_slices`, and exact `machine/shot/run` consistency between pulse metadata and embedded slice payloads while preserving existing sequence/single-payload contracts | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-127 | P1 | Control/Interop | Add direct digital-twin pulse export helper for IDS container workflows | `src/scpn_fusion/control/tokamak_digital_twin.py`, `tests/test_tokamak_digital_twin.py` | Added `run_digital_twin_ids_pulse(...)` for deterministic multi-horizon digital-twin execution returning pulse-style IDS container output (`ids_equilibrium_pulse_v1`), refactored shared snapshot generation for history/pulse modes, and added regression coverage for pulse validity, deterministic replay, and invalid history-step rejection | `python -m pytest tests/test_imas_connector.py tests/test_tokamak_digital_twin.py -q` |
| H8-128 | P1 | Control | Add deterministic chaos-monkey sensor dropout/noise lane for digital-twin runtime realism | `src/scpn_fusion/control/tokamak_digital_twin.py`, `tests/test_tokamak_digital_twin.py` | Added optional chaos controls (`chaos_monkey`, `sensor_dropout_prob`, `sensor_noise_std`) to inject deterministic sensor-channel dropout and Gaussian probe noise during state observation with strict scalar guards; runtime summary now reports dropout totals/rate for auditability, and regression tests lock deterministic replay, full-dropout accounting, and invalid-input rejection | `python -m pytest tests/test_tokamak_digital_twin.py tests/test_imas_connector.py -q` |
| H8-129 | P1 | Control | Expand flight-sim actuator realism with dedicated heating transfer lane and bounded coil-command dynamics | `src/scpn_fusion/control/tokamak_flight_sim.py`, `tests/test_tokamak_flight_sim.py` | `IsoFluxController` now supports independent heating actuator dynamics (`heating_actuator_tau_s`) and bounded coil delta commands (`actuator_current_delta_limit`) with strict parameter guards; heating ramp is passed through a first-order actuator (`physics.beta_scale`) and runtime summary now reports `final_beta_scale` plus `mean_abs_heating_actuator_lag`; tests cover new summary fields, deterministic replay, invalid-control rejection, and lag sensitivity to heating actuator time constant | `python -m pytest tests/test_tokamak_flight_sim.py -q` |
| H8-130 | P1 | Engineering | Add broad-phase AABB culling lane for CAD occlusion ray checks | `src/scpn_fusion/engineering/cad_raytrace.py`, `tests/test_cad_raytrace.py` | Added optional occlusion broad-phase path (`occlusion_broadphase`, default enabled) that pre-filters candidate triangles by segment-vs-triangle AABB overlap before precise Moller-Trumbore checks, reducing unnecessary intersection tests while preserving physical loading outputs; regression tests lock exact parity with legacy no-broadphase occlusion behavior | `python -m pytest tests/test_cad_raytrace.py tests/test_blanket_neutronics.py -q` |
| H8-131 | P1 | Control/Validation | Unify GDEP-01 chaos runtime with ingest helper and expose explicit chaos telemetry counters | `src/scpn_fusion/control/digital_twin_ingest.py`, `validation/gdep_01_digital_twin_hook.py`, `tests/test_digital_twin_ingest_runtime.py`, `tests/test_gdep_01_digital_twin_hook.py` | `run_realtime_twin_session` now reports deterministic chaos diagnostics (`chaos_channels_total`, `chaos_dropouts_total/rate`, `chaos_noise_injections_total/rate`), and GDEP-01 validation now delegates per-machine execution to the runtime helper instead of maintaining duplicate chaos simulation logic; markdown output now includes chaos dropout/noise rates and tests lock deterministic counter behavior plus full-dropout accounting | `python -m pytest tests/test_digital_twin_ingest_runtime.py tests/test_gdep_01_digital_twin_hook.py -q` |
| H8-132 | P1 | Validation | Add campaign-level chaos aggregate diagnostics for GDEP-01 reporting | `validation/gdep_01_digital_twin_hook.py`, `tests/test_gdep_01_digital_twin_hook.py` | GDEP-01 campaign output now includes aggregate chaos counters/rates across machines (`chaos_channels_total`, `chaos_dropouts_total/rate`, `chaos_noise_injections_total/rate`) and markdown now reports configured vs observed chaos rates; tests lock aggregate-key presence, deterministic replay of aggregate counts, and full-dropout channel accounting | `python -m pytest tests/test_digital_twin_ingest_runtime.py tests/test_gdep_01_digital_twin_hook.py -q` |
| H8-133 | P1 | Validation | Lock GDEP markdown chaos reporting contract with explicit regression coverage | `tests/test_gdep_01_digital_twin_hook.py` | Added markdown contract test ensuring `render_markdown(...)` always includes the chaos campaign section and configured/observed chaos lines, preventing silent reporting regressions when campaign telemetry schema evolves | `python -m pytest tests/test_gdep_01_digital_twin_hook.py -q` |
| H8-134 | P1 | Validation/Interop | Deliver full empirical validation pipeline with DIII-D/C-Mod archive adapters, 100+ disruption scenarios, RMSE gates, and rewrite/pivot escalation logic | `src/scpn_fusion/io/tokamak_archive.py`, `src/scpn_fusion/io/__init__.py`, `validation/full_validation_pipeline.py`, `tests/test_tokamak_archive.py`, `tests/test_full_validation_pipeline.py` | Added archive-feed layer with DIII-D GEQDSK and Alcator C-Mod ITPA profile ingestion plus optional live MDSplus fetch/fallback, then wired a full disruption-focused empirical campaign runner (100+ scenarios) that evaluates MPC/RL lanes against psi-contour and confinement RMSE thresholds (`<5%` target, `>10%` rewrite trigger), reports high-beta divergence rate, and emits explicit hybrid-2D pivot recommendations when 1.5D behavior diverges in high-beta regimes; includes optional FNO retrain trigger path and deterministic regression tests | `python -m pytest tests/test_tokamak_archive.py tests/test_full_validation_pipeline.py -q`, `python validation/full_validation_pipeline.py --scenario-count 120 --controllers mpc,rl --strict --output-json artifacts/full_validation_pipeline_h8134.json --output-md artifacts/full_validation_pipeline_h8134.md`, `python -m pytest tests/test_imas_connector.py tests/test_gai_01_turbulence_surrogate.py -q` |

## Task Accounting

- Total imported tasks: 85
- Tasks currently queued for Sprint S2: 8
- Tasks currently queued for Sprint S3: 6
- Tasks currently queued for Sprint S4: 4
- Post-S4 hardening tasks delivered: 270
- Remaining in deferred pool after queue selection: 0
- External reactor-engineering intake tasks (H6 queue): 0 (all 9 delivered)

## Active Task

- Completed: `S2-001`
- Completed: `S2-002`
- Completed: `S2-003`
- Completed: `S2-004`
- Completed: `S2-005`
- Completed: `S2-006`
- Completed: `S2-007`
- Completed: `S2-008`
- Completed: `S3-001`
- Completed: `S3-002`
- Completed: `S3-003`
- Completed: `S3-004`
- Completed: `S3-005`
- Completed: `S3-006`
- Completed: `S4-001`
- Completed: `S4-002`
- Completed: `S4-003`
- Completed: `S4-004`
- Completed: `H5-001`
- Completed: `H5-002`
- Completed: `H5-003`
- Completed: `H5-004`
- Completed: `H5-005`
- Completed: `H5-006`
- Completed: `H5-007`
- Completed: `H5-008`
- Completed: `H5-009`
- Completed: `H5-010`
- Completed: `H5-011`
- Completed: `H5-012`
- Completed: `H5-013`
- Completed: `H5-014`
- Completed: `H5-015`
- Completed: `H5-016`
- Completed: `H5-017`
- Completed: `H5-018`
- Completed: `H5-019`
- Completed: `H5-020`
- Completed: `H5-021`
- Completed: `H5-022`
- Completed: `H5-023`
- Completed: `H5-024`
- Completed: `H5-025`
- Completed: `H5-026`
- Completed: `H5-027`
- Completed: `H5-028`
- Completed: `H5-029`
- Completed: `H5-030`
- Completed: `H5-031`
- Completed: `H5-032`
- Completed: `H5-033`
- Completed: `H5-034`
- Completed: `H5-035`
- Completed: `H5-036`
- Completed: `H5-037`
- Completed: `H6-001`
- Completed: `H6-002`
- Completed: `H6-003`
- Completed: `H6-004`
- Completed: `H6-005`
- Completed: `H6-006`
- Completed: `H6-007`
- Completed: `H6-008`
- Completed: `H6-009`
- Completed: `H7-001`
- Completed: `H7-002`
- Completed: `H7-003`
- Completed: `H7-004`
- Completed: `H7-005`
- Completed: `H7-006`
- Completed: `H7-007`
- Completed: `H7-008`
- Completed: `H7-009`
- Completed: `H7-010`
- Completed: `H7-011`
- Completed: `H7-012`
- Completed: `H7-013`
- Completed: `H7-014`
- Completed: `H7-015`
- Completed: `H7-016`
- Completed: `H7-017`
- Completed: `H7-018`
- Completed: `H7-019`
- Completed: `H7-020`
- Completed: `H7-021`
- Completed: `H7-022`
- Completed: `H7-023`
- Completed: `H7-024`
- Completed: `H7-025`
- Completed: `H7-026`
- Completed: `H7-027`
- Completed: `H7-028`
- Completed: `H7-029`
- Completed: `H7-030`
- Completed: `H7-031`
- Completed: `H7-032`
- Completed: `H7-033`
- Completed: `H7-034`
- Completed: `H7-035`
- Completed: `H7-036`
- Completed: `H7-037`
- Completed: `H7-038`
- Completed: `H7-039`
- Completed: `H7-040`
- Completed: `H7-041`
- Completed: `H7-042`
- Completed: `H7-043`
- Completed: `H7-044`
- Completed: `H7-045`
- Completed: `H7-046`
- Completed: `H7-047`
- Completed: `H7-048`
- Completed: `H7-049`
- Completed: `H7-050`
- Completed: `H7-051`
- Completed: `H7-052`
- Completed: `H7-053`
- Completed: `H7-054`
- Completed: `H7-055`
- Completed: `H7-056`
- Completed: `H7-057`
- Completed: `H7-058`
- Completed: `H7-059`
- Completed: `H7-060`
- Completed: `H7-061`
- Completed: `H7-062`
- Completed: `H7-063`
- Completed: `H7-064`
- Completed: `H7-065`
- Completed: `H7-066`
- Completed: `H7-067`
- Completed: `H7-068`
- Completed: `H7-069`
- Completed: `H7-070`
- Completed: `H7-071`
- Completed: `H7-072`
- Completed: `H7-073`
- Completed: `H7-074`
- Completed: `H7-075`
- Completed: `H7-076`
- Completed: `H7-077`
- Completed: `H7-078`
- Completed: `H7-079`
- Completed: `H7-080`
- Completed: `H7-081`
- Completed: `H7-082`
- Completed: `H7-083`
- Completed: `H7-084`
- Completed: `H7-085`
- Completed: `H7-086`
- Completed: `H7-087`
- Completed: `H7-088`
- Completed: `H7-089`
- Completed: `H7-090`
- Completed: `H8-001`
- Completed: `H8-002`
- Completed: `H8-003`
- Completed: `H8-004`
- Completed: `H8-005`
- Completed: `H8-006`
- Completed: `H8-007`
- Completed: `H8-008`
- Completed: `H8-009`
- Completed: `H8-010`
- Completed: `H8-011`
- Completed: `H8-012`
- Completed: `H8-013`
- Completed: `H8-014`
- Completed: `H8-015`
- Completed: `H8-016`
- Completed: `H8-017`
- Completed: `H8-018`
- Completed: `H8-019`
- Completed: `H8-020`
- Completed: `H8-021`
- Completed: `H8-022`
- Completed: `H8-023`
- Completed: `H8-024`
- Completed: `H8-025`
- Completed: `H8-026`
- Completed: `H8-027`
- Completed: `H8-028`
- Completed: `H8-029`
- Completed: `H8-030`
- Completed: `H8-031`
- Completed: `H8-032`
- Completed: `H8-033`
- Completed: `H8-034`
- Completed: `H8-035`
- Completed: `H8-036`
- Completed: `H8-037`
- Completed: `H8-038`
- Completed: `H8-039`
- Completed: `H8-040`
- Completed: `H8-041`
- Completed: `H8-042`
- Completed: `H8-043`
- Completed: `H8-044`
- Completed: `H8-045`
- Completed: `H8-046`
- Completed: `H8-047`
- Completed: `H8-048`
- Completed: `H8-049`
- Completed: `H8-050`
- Completed: `H8-051`
- Completed: `H8-052`
- Completed: `H8-053`
- Completed: `H8-054`
- Completed: `H8-055`
- Completed: `H8-056`
- Completed: `H8-057`
- Completed: `H8-058`
- Completed: `H8-059`
- Completed: `H8-060`
- Completed: `H8-061`
- Completed: `H8-062`
- Completed: `H8-063`
- Completed: `H8-064`
- Completed: `H8-065`
- Completed: `H8-066`
- Completed: `H8-067`
- Completed: `H8-068`
- Completed: `H8-069`
- Completed: `H8-070`
- Completed: `H8-071`
- Completed: `H8-072`
- Completed: `H8-073`
- Completed: `H8-074`
- Completed: `H8-075`
- Completed: `H8-076`
- Completed: `H8-077`
- Completed: `H8-078`
- Completed: `H8-079`
- Completed: `H8-080`
- Completed: `H8-081`
- Completed: `H8-082`
- Completed: `H8-083`
- Completed: `H8-084`
- Completed: `H8-085`
- Completed: `H8-086`
- Completed: `H8-087`
- Completed: `H8-088`
- Completed: `H8-089`
- Completed: `H8-090`
- Completed: `H8-091`
- Completed: `H8-092`
- Completed: `H8-093`
- Completed: `H8-094`
- Completed: `H8-095`
- Completed: `H8-096`
- Completed: `H8-097`
- Completed: `H8-098`
- Completed: `H8-099`
- Completed: `H8-100`
- Completed: `H8-101`
- Completed: `H8-102`
- Completed: `H8-103`
- Completed: `H8-104`
- Completed: `H8-105`
- Completed: `H8-106`
- Completed: `H8-107`
- Completed: `H8-108`
- Completed: `H8-109`
- Completed: `H8-110`
- Completed: `H8-111`
- Completed: `H8-112`
- Completed: `H8-113`
- Completed: `H8-114`
- Completed: `H8-115`
- Completed: `H8-116`
- Completed: `H8-117`
- Completed: `H8-118`
- Completed: `H8-119`
- Completed: `H8-120`
- Completed: `H8-121`
- Completed: `H8-122`
- Completed: `H8-123`
- Completed: `H8-124`
- Completed: `H8-125`
- Completed: `H8-126`
- Completed: `H8-127`
- Completed: `H8-128`
- Completed: `H8-129`
- Completed: `H8-130`
- Completed: `H8-131`
- Completed: `H8-132`
- Completed: `H8-133`
- Completed: `H8-134`
- Next active task: none (deferred-pool execution wave complete; post-S4 hardening queue exhausted; H8 hardening wave open by direct execution).
